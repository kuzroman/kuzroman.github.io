var ze=Object.defineProperty;var De=(i,e,t)=>e in i?ze(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>(De(i,typeof e!="symbol"?e+"":e,t),t),ie=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var N=(i,e,t)=>(ie(i,e,"read from private field"),t?t.call(i):e.get(i)),oe=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ne=(i,e,t,o)=>(ie(i,e,"write to private field"),o?o.call(i,t):e.set(i,t),t);import{r as L,l as Ue,q as u,w as T,o as d,a as _,t as v,K as z,u as m,L as H,v as q,x as J,p as Q,e as a,F as Ae,b as He,c as P,z as G,C as I,M as Z,J as ee,h as w,E as ce,A as Pe,B as Ye,N as le,O as j,D as Ee,H as de,T as Ne,f as Ve}from"./entry.45265f6c.js";import{C as Xe,M as Ke}from"./Meteor.6554a2df.js";import{u as Oe}from"./composables.6fb8ef41.js";const We={key:1},je={__name:"LetterTag",props:{sign:{type:String,default:" "},isKilled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1}},emits:["letter-tag--show"],setup(i,{emit:e}){const t=i,o=L(null),c=L(null),r=L(null),l=L(null),g=L(null),f=L(Ue().vnode.key),x=u(()=>[{show:t.isShow},{hide:t.isKilled}]),b=()=>{if(!o.value)return;const S=o.value.getBoundingClientRect();c.value=Math.ceil(S.left),l.value=Math.ceil(S.top),r.value=Math.ceil(S.left+o.value.clientWidth),g.value=Math.ceil(S.top+o.value.clientHeight)};return T(()=>t.isShow,()=>{b(),!(!c.value||!l.value)&&e("letter-tag--show",{x1:c.value,x2:r.value,y1:l.value,y2:g.value,id:f.value})}),(S,$)=>i.sign!=="|"?(d(),_("div",{key:0,ref_key:"letterEl",ref:o,class:z(["letter-tag",m(x)])},v(i.sign),3)):(d(),_("br",We))}};class V{constructor(e,t=1,o=!1){this.audio=new Audio(e),this.audio.volume=t,this.audio.loop=o}isPlaying(){return this.audio.duration>0&&!this.audio.paused}play(e=()=>{}){this.audio.play().then(t=>e(t))}pause(){this.audio.pause()}replay(){this.audio.currentTime=0,this.play()}destroy(){this.audio.remove()}}const qe=""+new URL("explode.1718f901.mp3",import.meta.url).href;var R;class Je{constructor(e){oe(this,R,void 0);p(this,"ctx");ne(this,R,document.querySelector(e)),this.ctx=N(this,R).getContext("2d")}drawRect(e,t,o,c){this.ctx.fillStyle=c||"#fff",this.ctx.fillRect(e,t,o,o)}drawRing(e){const{x:t,y:o,size:c,color:r,thick:l,borderColor:g}=e;this.ctx.beginPath(),this.ctx.arc(t,o,c,0,2*Math.PI),r&&(this.ctx.fillStyle=r,this.ctx.fill()),l&&(this.ctx.lineWidth=l),g&&(this.ctx.strokeStyle=g,this.ctx.stroke())}clearCanvas(e=N(this.ctx,R).width,t=N(this.ctx,R).height){this.ctx.clearRect(0,0,e,t)}}R=new WeakMap;class Qe{constructor(e,t,o="default"){p(this,"ground",document.body.offsetHeight);p(this,"gravityX",H(1,5));p(this,"gravityY",H(1,5));p(this,"speed",H(2,5)/10);p(this,"bounceNum",0);p(this,"maxBounceNum",5);p(this,"revert",!1);this.x1=e||0,this.y1=t||0,this.size=H(1,3),this.isStopped=!1,this.direction=Math.random()<.6?1:-1,this.type=o}update(e){this.type==="shrapnel"?this._updateShrapnel():this._updateSeed(e)}_updateSeed(e){if(this._isBarrier(e)&&(this.revert=!0,this.bounceNum+=1),this.gravityY<0&&(this.revert=!1),this._isBounceLimitReached()||this._isUnderGround()){this.isStopped=!0;return}this._move()}_updateShrapnel(){if(this._isUnderGround()){this.isStopped=!0;return}this._fallDown(this.direction,!0)}_isBounceLimitReached(){return this.maxBounceNum<this.bounceNum}_isUnderGround(){return this.ground<this.y1}_isBarrier(e){return e?this.y1>=e.y1&&e.x1<this.x1&&this.x1<e.x2:!1}_move(){this.revert?this._fallUp():this._fallDown()}_fallDown(e,t){this._moveX(e,t),this.y1+=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY+this.speed)*100)/100}_fallUp(e){this._moveX(e),this.y1-=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY-1)*100)/100}_moveX(e=1,t=!1){const o=t?H(2,8):7;this.x1+=e*Math.round(this.gravityX/o),this.gravityX=Math.round((this.gravityX+this.speed)*100)/100}}class Ze{constructor(e,t){p(this,"gravityY",10);p(this,"ground",-20);this.x1=e,this.x2=e+6,this.y1=t,this.size=6}}class et{constructor(e,t){p(this,"isShow",!1);p(this,"x1",0);p(this,"x2",0);p(this,"y1",0);p(this,"y2",0);const o=e===" "||e==="|";this.id=t,this.sign=e===" "?"-":e,this.isKilled=o,this.isService=o}static getLifeLetters(e){return e.filter(t=>!t.isKilled)}}const tt={class:"canvas-letters"},st={id:"lettersEl",class:"letters"},it=["width","height"],ot={key:0,style:{position:"absolute",top:"0",left:"50%"}},nt={__name:"CanvasAnimation",props:{shooter:{type:Object,default:()=>{}}},setup(i){const e=i,t=q();let o,c,r;const l=u(()=>t.getters["game/isDebug"]),g=u(()=>t.getters["game/shots"]),f=u(()=>t.getters["game/letters"]),x=u(()=>t.getters["game/barrier"]),b=u(()=>t.getters["game/circles"]),S=u(()=>t.getters["game/meteors"]),$=u(()=>t.getters["game/bullets"]),D=u(()=>t.getters["game/circlesLength"]),U=u(()=>t.getters["game/meteorsLength"]),Y=u(()=>t.getters["game/bulletLength"]),M=u(()=>C.value.length>0||Y.value>0||D.value>0||U.value>0),C=L([]),X=3,K=l.value?0:16;let y,F=0,B=0;const A="Hello, my name is Roman.|I am a Front-End developer with 12 years old experience.|SPA, SSR, SSG, js and Vue ... are my passion.|Check this out some projects on my Work page.|Feel free if you wanna say hello at kuzroman@list.ru then do it!)",E=s=>t.commit("game/setIsSeedsFalling",s),O=s=>t.commit("game/setIsGameFinished",s),W=s=>t.commit("game/setLetters",s),te=s=>t.commit("game/updateLetters",s),me=s=>t.commit("game/addCircle",s),_e=s=>t.commit("game/addMeteor",s),ve=s=>t.commit("game/addBullet",s),pe=s=>t.commit("game/removeCircle",s),ge=s=>t.commit("game/removeMeteors",s),fe=s=>t.commit("game/removeBullet",s),ye=s=>t.commit("game/showLetter",s),xe=s=>t.commit("game/killLetter",s),Se=s=>t.commit("game/increaseDamage",s);T(()=>g.value,()=>{ve(new Ze(e.shooter.x1,e.shooter.y1))}),T(()=>M.value,s=>{s&&se()});const Le=()=>{const s=Array.from(A,(n,h)=>new et(n,h));W(s)},we=s=>{const n=f.value[s.id];te({...n,...s}),be(s)},be=(s,n)=>{for(let h=0;h<X;h++){const k=new Qe(s.x1,s.y1,n);C.value.push(k)}},Be=s=>{if(A.length-1<s)return;const n=f.value[s];ye(n),te(n)},se=()=>{E(!0);let s=0;clearInterval(r),r=setInterval(()=>{y.clearCanvas(F,B),Be(s++),Ie(),$e(),Me(),Ge(),M.value||(clearInterval(r),E(!1))},K)};function ke(s){s.updatePosition(),s.updateMeteorSize(),y.drawRing({x:s.x,y:s.y,size:s.size,color:"#fc0"})}const Ge=()=>{for(const s in S.value){const n=S.value[s];ke(n),Re(e.shooter,n),(n.size<.1||n.isInactive)&&ge(s)}},Ie=()=>{C.value=C.value.filter(s=>(s.update(x.value),y.drawRect(s.x1,s.y1,s.size),!s.isStopped))},$e=()=>{for(const s in $.value){const n=$.value[s];if(n.y1-=n.gravityY,y.drawRing({x:n.x1,y:n.y1,size:n.size,color:"#4cb977"}),n.y1<n.ground){fe(s);continue}f.value.length?Ce(n,f.value):O(!0)}},Me=()=>{for(const s in b.value){const n=b.value[s];n.size+=.5,n.thick-=.2,y.drawRing({x:n.x,y:n.y,size:n.size,color:!1,thick:n.thick,borderColor:"#fff"}),n.thick<n.endThick&&pe(s)}},Ce=(s,n)=>{n.forEach((h,k)=>{!h.isKilled&&s.y1<h.y1&&(s.x1<h.x1&&h.x1<s.x2||s.x1<h.x2&&h.x2<s.x2||h.x1<s.x1&&s.x2<h.x2)&&(xe(h),k%2===0&&me(new Xe(h.x1,h.y1)),Fe(h),o.replay())})},Fe=s=>{for(let n=0;n<3;n++)_e(new Ke({x:s.x1,y:s.y1}))},Re=(s,n)=>{s.y1<n.y&&s.x1<n.x&&n.x<s.x2&&(n.setInactive(),Se(n))},Te=()=>{y=new Je("#canvas"),Le(),se()};return J(()=>{F=window.innerWidth,B=window.innerHeight,o=new V(qe,.3),Te()}),Q(()=>{clearInterval(c),o.destroy()}),(s,n)=>{const h=je;return d(),_("div",tt,[a("div",st,[(d(!0),_(Ae,null,He(m(f),k=>(d(),P(h,{key:k.id,"is-show":k.isShow,"is-killed":k.isKilled,sign:k.sign,"onLetterTag-Show":we},null,8,["is-show","is-killed","sign"]))),128))]),a("canvas",{id:"canvas",width:m(F),height:m(B)},null,8,it),m(l)?(d(),_("div",ot,[a("div",null,"hasElementsInAnimation: "+v(m(M)),1),a("div",null,"seeds: "+v(m(C).length)+" | bullets: "+v(m(Y)),1),a("div",null,"circles: "+v(m(D))+" | meteors: "+v(m(U)),1),a("div",null,"text "+v(A.length),1)])):G("",!0)])}}};const at={name:"UIButton",props:{text:{type:String,default:"Button"},disabled:{type:Boolean,default:!1}},data(){return{}},computed:{},methods:{}};function rt(i,e,t,o,c,r){return d(),_("div",{class:z(["ui-button",{disabled:t.disabled}])},v(t.text),3)}const ue=I(at,[["render",rt]]);const ct={name:"ButtonPlay",components:{UIButton:ue},props:{},data(){return{barrier:{},texts:{default:"Destroy this text",wait:"Wait for falling ...",again:"Close"}}},computed:{...Z("game",["isSeedsFalling","isGameReady","isGameFinished"]),text(){return this.isGameFinished?this.texts.again:this.isSeedsFalling?this.texts.wait:this.texts.default},stiles(){return{disabled:this.isSeedsFalling,hide:this.isGameReady&&!this.isGameFinished}}},mounted(){this.createBarrier(),this.setBarrier(this.barrier)},methods:{...ee("game",["setIsGameReady","setBarrier"]),handleClick(){if(!this.isSeedsFalling){if(this.isGameFinished){this.$emit("button-play--restart",this.barrier);return}setTimeout(()=>{this.setIsGameReady(!0)})}},createBarrier(){const i=this.$el.getBoundingClientRect();this.barrier={x1:i.left,x2:i.left+i.width,y1:i.top}}}},lt=["disabled"];function dt(i,e,t,o,c,r){const l=ue;return d(),_("div",{class:z(["button-play",r.stiles]),disabled:i.isSeedsFalling,onClick:e[0]||(e[0]=(...g)=>r.handleClick&&r.handleClick(...g))},[w(l,{text:r.text,disabled:i.isSeedsFalling},null,8,["text","disabled"])],10,lt)}const ut=I(ct,[["render",dt]]);const ht={name:"UILoaderLine",props:{percent:{type:Number,default:50}},data(){return{}},computed:{width(){return`${this.percent}%`}}},mt={class:"ui-loader-line"};function _t(i,e,t,o,c,r){return d(),_("div",mt,[a("div",{class:"loader",style:ce({width:r.width})},null,4)])}const he=I(ht,[["render",_t]]);const vt={name:"IconTime"},pt={class:"icon-time",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},gt=a("path",{d:"M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448 c0,10.19-8.259,18.447-18.447,18.447c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699 c8.336,0,15.094-6.758,15.094-15.094S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448c0,10.19-8.259,18.447-18.447,18.447 c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699c8.336,0,15.094-6.758,15.094-15.094 S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444 l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z",fill:"#6a6a6a"},null,-1),ft=[gt];function yt(i,e,t,o,c,r){return d(),_("svg",pt,ft)}const xt=I(vt,[["render",yt]]);const St={name:"IconShield"},Lt=i=>(Pe("data-v-4739967d"),i=i(),Ye(),i),wt={class:"icon-shield",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},bt=Lt(()=>a("path",{d:"M41.575,12.596c-3.887-1.112-6.776-2.975-9.326-4.616C29.669,6.317,27.442,4.882,25,4.882 c-2.441,0-4.668,1.435-7.248,3.094c-2.549,1.645-5.438,3.507-9.325,4.619l-1.324,0.378v1.376c0,0.691,0.033,5.652,0.086,6.479 c0.109,1.667,0.339,3.317,0.684,4.905c3.292,15.173,15.951,20.082,16.488,20.282L25,46.256l0.642-0.24 c0.536-0.2,13.193-5.105,16.486-20.282c0.345-1.588,0.575-3.237,0.684-4.905c0.055-0.825,0.086-5.787,0.086-6.479v-1.376 L41.575,12.596z M25,44.308V25.345H9.658C9.343,23.9,9.119,22.358,9.012,20.71c-0.049-0.75-0.084-5.567-0.084-6.36 C16.964,12.051,21.067,6.709,25,6.709V20.71v4.635h15.346C37.226,39.73,25,44.308,25,44.308z",fill:"#6a6a6a"},null,-1)),Bt=[bt];function kt(i,e,t,o,c,r){return d(),_("svg",wt,Bt)}const Gt=I(St,[["render",kt],["__scopeId","data-v-4739967d"]]);const ae=100;let re;const It={name:"StatusBar",components:{UI_Loader_line:he,UILink2Move:le,IconTime:xt,IconShield:Gt},data(){return{health:ae,isDebug:!1}},watch:{isGameStart(){this.runTimer()},damage(i){this.health=ae-i},health(i){i<=0&&this.setIsGameFinished(!0)}},computed:{...Z("game",["isGameReady","isGameStart","isGameFinished","score","shots","letters","killedLetters","damage","timeLeft"])},methods:{...ee("game",["setIsGameFinished","setIsLeaderBoardOpened","setScore","decreaseTimeLeft"]),runTimer(){re=setInterval(()=>{this.decreaseTimeLeft(),(this.timeLeft<=0||this.isGameFinished)&&(this.setIsGameFinished(!0),clearInterval(re))},1e3)},openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},$t={class:"status-bar--top"},Mt={class:"score"},Ct={class:"status-bar--right"},Ft={class:"time"};function Rt(i,e,t,o,c,r){const l=j("IconTime"),g=j("IconShield"),f=he,x=le;return d(),_("div",{class:z(["status-bar",{active:i.isGameReady||c.isDebug}])},[a("div",$t,[a("div",Mt,v(i.killedLetters.length)+" killed",1),a("div",Ct,[w(l),w(g),a("div",Ft,v(i.timeLeft)+"s",1)])]),w(f,{class:"loader-Line",percent:c.health},null,8,["percent"]),w(x,{class:"leaders",text:"leaderboard",onClick:r.openLeaderBoard},null,8,["onClick"])],2)}const Tt=I(It,[["render",Rt]]),zt=""+new URL("damage.f1e615a0.mp3",import.meta.url).href;const Dt={__name:"RobotShooter",props:{position:{type:Object,default:{}}},setup(i,{expose:e}){const t=i,o=q();let c;const r=L(!1),l=L(null),g=u(()=>o.getters["game/isGameReady"]),f=u(()=>o.getters["game/isGameFinished"]),x=u(()=>o.getters["game/damage"]),b=u(()=>({left:t.position.x1+"px"})),S=u(()=>({active:g.value&&!f.value,damage:r.value})),$=()=>{r.value=!0,setTimeout(()=>{r.value=!1},300)};return T(()=>x.value,()=>{$(),c.replay()}),J(()=>{c=new V(zt,.3)}),Q(()=>{c.destroy()}),e({shooter:l}),(D,U)=>(d(),_("div",{ref_key:"shooter",ref:l,class:z(["robot-shooter",m(S)]),style:ce(m(b))},null,6))}};const Ut={},At={class:"ui-dashed-list"};function Ht(i,e){return d(),_("div",At,[Ee(i.$slots,"default")])}const Pt=I(Ut,[["render",Ht]]);const Yt={name:"ScoreBoard",components:{DashedList:Pt},data(){return{isDebug:!1}},computed:{...Z("game",["isGameFinished","timeLeft","damage","shots","letters","killedLetters","aliveLetters","score"]),score(){if(this.aliveLetters.length,!this.killedLetters.length)return 0;const i=Math.ceil(this.killedLetters.length*1e4/(this.aliveLetters.length+this.shots));return Math.floor(i+this.bonusForLife+this.bonusForTime)},bonusForTime(){return Math.floor(this.timeLeft*200)},bonusForLife(){return Math.floor((100-this.damage)*50)},isCurrentScoreBest(){return this.bestScore<this.score},bestScore(){return+this.getBestScore()}},watch:{score(i){this.setScore(i),this.setBestScoreToLocalStore(i)}},methods:{...ee("game",["setScore","setIsLeaderBoardOpened"]),openLeaderBoard(){this.setIsLeaderBoardOpened(!0)},getBestScore(){return localStorage.getItem("bestScore")},setBestScoreToLocalStore(i){this.isCurrentScoreBest&&localStorage.setItem("bestScore",i)}}},Et={class:"score"},Nt={class:"hooray"},Vt=a("div",null,"Hooray!",-1),Xt={key:0,class:"mt-4"},Kt={class:"result"},Ot=a("div",null,"Time left",-1),Wt={class:"result"},jt=a("div",null,"Shots",-1),qt={class:"result"},Jt=a("div",null,"Goals",-1),Qt={class:"result"},Zt=a("div",null,"Life",-1),es={key:0,class:"result bonus"},ts=a("div",null,"Bonus for survival 🎉",-1),ss={key:1,class:"result bonus"},is=a("div",null,"Bonus for speed 🎉",-1),os={class:"result best"},ns=a("div",null,"Your best score",-1);function as(i,e,t,o,c,r){const l=j("DashedList");return d(),_("div",{class:z(["score-board",{active:i.isGameFinished||c.isDebug}])},[a("h3",Et,v(r.score)+" points",1),a("div",Nt,[Vt,r.isCurrentScoreBest?(d(),_("div",Xt," You've just beaten your own highscore 🎉🎉🎉 ")):G("",!0)]),w(l,null,{default:de(()=>[a("div",Kt,[Ot,a("div",null,v(i.timeLeft),1)]),a("div",Wt,[jt,a("div",null,v(i.shots),1)]),a("div",qt,[Jt,a("div",null,v(i.killedLetters.length),1)]),a("div",Qt,[Zt,a("div",null,v(100-i.damage),1)]),r.bonusForLife?(d(),_("div",es,[ts,a("div",null,v(r.bonusForLife),1)])):G("",!0),r.bonusForTime?(d(),_("div",ss,[is,a("div",null,v(r.bonusForTime),1)])):G("",!0),a("div",os,[ns,a("div",null,v(r.bestScore),1)])]),_:1})],2)}const rs=I(Yt,[["render",as]]),cs=""+new URL("shoot.6b00b3bd.mp3",import.meta.url).href,ls=""+new URL("backgroundGame.c17ea688.mp3",import.meta.url).href;const ds={__name:"MainGame",setup(i){const e=q();let t,o;const c=L({}),r=L(0),l=L(null),g=u(()=>e.getters["game/isGameStart"]),f=u(()=>e.getters["game/isGameFinished"]),x=u(()=>e.getters["game/isGameReady"]),b=u(()=>e.getters["app/isPageAnimationFinished"]),S=y=>e.commit("game/setIsGameStart",y),$=()=>e.commit("game/resetStateGame"),D=()=>e.commit("game/increaseShoots"),U=()=>e.commit("leaderBoard/resetStateLeaderBoard"),Y=()=>{r.value+=1},M=()=>{U(),$(),Y(),o.destroy(),t.destroy()},C=()=>{!x.value||f.value||(g.value||S(!0),D(),t.replay())},X=y=>{var B;if(!((B=l==null?void 0:l.value)!=null&&B.shooter))return;const F=l.value.shooter;c.value={x1:y.clientX,y1:F.getBoundingClientRect().top,x2:y.clientX+F.offsetWidth}},K=()=>{let y;window.addEventListener("resize",()=>{clearTimeout(y),y=setTimeout(()=>{M()},300)})};return J(()=>{t=new V(cs,.3),o=new V(ls,.5,!0),K()}),Q(()=>{M()}),T(()=>x.value,()=>{o.replay()}),T(()=>f.value,()=>{o.pause()}),(y,F)=>{const B=nt,A=ut,E=Tt,O=Dt,W=rs;return d(),_("div",{key:m(r),class:"main-game",onClick:C,onMousemove:X},[w(B,{shooter:m(c)},null,8,["shooter"]),w(Ne,null,{default:de(()=>[m(b)?(d(),P(A,{key:0,"onButtonPlay-Restart":M})):G("",!0)]),_:1}),m(x)?(d(),P(E,{key:0})):G("",!0),m(x)?(d(),P(O,{key:1,ref_key:"shooter",ref:l,position:m(c)},null,8,["position"])):G("",!0),m(f)?(d(),P(W,{key:2})):G("",!0)],32)}}},us={class:"page-game"},hs=a("div",{class:"stars-box"},[a("div",{id:"stars"}),a("div",{id:"stars2"}),a("div",{id:"stars3"})],-1),gs=Ve({__name:"index",setup(i){return Oe({title:"Hi! Nice to meet you =)"}),(e,t)=>{const o=ds;return d(),_("div",us,[w(o),hs])}}});export{gs as default};
