var ze=Object.defineProperty;var De=(i,e,t)=>e in i?ze(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var p=(i,e,t)=>(De(i,typeof e!="symbol"?e+"":e,t),t),ie=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var N=(i,e,t)=>(ie(i,e,"read from private field"),t?t.call(i):e.get(i)),oe=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ae=(i,e,t,o)=>(ie(i,e,"write to private field"),o?o.call(i,t):e.set(i,t),t);import{r as L,C as Ue,k as u,E as T,o as d,a as _,t as v,O as Y,u as m,P,j as q,x as Q,l as J,e as n,F as Pe,b as Ae,c as A,m as G,Q as Z,N as ee,s as R,h as w,w as ce,p as Ye,q as He,R as le,S as j,v as Ee,z as de,T as Ne,f as Ve}from"./entry.ae4975c5.js";import{C as Xe,M as Oe}from"./Meteor.82000b0f.js";import{_ as ue}from"./Button.df33735f.js";import{u as Ke}from"./composables.06abe941.js";const We={key:1},je={__name:"LetterTag",props:{sign:{type:String,default:" "},isKilled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1}},emits:["letter-tag--show"],setup(i,{emit:e}){const t=i,o=L(null),c=L(null),r=L(null),l=L(null),g=L(null),f=L(Ue().vnode.key),x=u(()=>[{show:t.isShow},{hide:t.isKilled}]),b=()=>{if(!o.value)return;const S=o.value.getBoundingClientRect();c.value=Math.ceil(S.left),l.value=Math.ceil(S.top),r.value=Math.ceil(S.left+o.value.clientWidth),g.value=Math.ceil(S.top+o.value.clientHeight)};return T(()=>t.isShow,()=>{b(),!(!c.value||!l.value)&&e("letter-tag--show",{x1:c.value,x2:r.value,y1:l.value,y2:g.value,id:f.value})}),(S,I)=>i.sign!=="|"?(d(),_("div",{key:0,ref_key:"letterEl",ref:o,class:Y(["letter-tag",m(x)])},v(i.sign),3)):(d(),_("br",We))}};class V{constructor(e,t=1,o=!1){this.audio=new Audio(e),this.audio.volume=t,this.audio.loop=o}isPlaying(){return this.audio.duration>0&&!this.audio.paused}play(e=()=>{}){this.audio.play().then(t=>e(t))}pause(){this.audio.pause()}replay(){this.audio.currentTime=0,this.play()}destroy(){this.audio.remove()}}const qe=""+new URL("explode.1718f901.mp3",import.meta.url).href;var F;class Qe{constructor(e){oe(this,F,void 0);p(this,"ctx");ae(this,F,document.querySelector(e)),this.ctx=N(this,F).getContext("2d")}drawRect(e,t,o,c){this.ctx.fillStyle=c||"#fff",this.ctx.fillRect(e,t,o,o)}drawRing(e){const{x:t,y:o,size:c,color:r,thick:l,borderColor:g}=e;this.ctx.beginPath(),this.ctx.arc(t,o,c,0,2*Math.PI),r&&(this.ctx.fillStyle=r,this.ctx.fill()),l&&(this.ctx.lineWidth=l),g&&(this.ctx.strokeStyle=g,this.ctx.stroke())}clearCanvas(e=N(this.ctx,F).width,t=N(this.ctx,F).height){this.ctx.clearRect(0,0,e,t)}}F=new WeakMap;class Je{constructor(e,t,o="default"){p(this,"ground",document.body.offsetHeight);p(this,"gravityX",P(1,5));p(this,"gravityY",P(1,5));p(this,"speed",P(2,5)/10);p(this,"bounceNum",0);p(this,"maxBounceNum",5);p(this,"revert",!1);this.x1=e||0,this.y1=t||0,this.size=P(1,3),this.isStopped=!1,this.direction=Math.random()<.6?1:-1,this.type=o}update(e){this.type==="shrapnel"?this._updateShrapnel():this._updateSeed(e)}_updateSeed(e){if(this._isBarrier(e)&&(this.revert=!0,this.bounceNum+=1),this.gravityY<0&&(this.revert=!1),this._isBounceLimitReached()||this._isUnderGround()){this.isStopped=!0;return}this._move()}_updateShrapnel(){if(this._isUnderGround()){this.isStopped=!0;return}this._fallDown(this.direction,!0)}_isBounceLimitReached(){return this.maxBounceNum<this.bounceNum}_isUnderGround(){return this.ground<this.y1}_isBarrier(e){return e?this.y1>=e.y1&&e.x1<this.x1&&this.x1<e.x2:!1}_move(){this.revert?this._fallUp():this._fallDown()}_fallDown(e,t){this._moveX(e,t),this.y1+=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY+this.speed)*100)/100}_fallUp(e){this._moveX(e),this.y1-=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY-1)*100)/100}_moveX(e=1,t=!1){const o=t?P(2,8):7;this.x1+=e*Math.round(this.gravityX/o),this.gravityX=Math.round((this.gravityX+this.speed)*100)/100}}class Ze{constructor(e,t){p(this,"gravityY",10);p(this,"ground",-20);this.x1=e,this.x2=e+6,this.y1=t,this.size=6}}class et{constructor(e,t){p(this,"isShow",!1);p(this,"x1",0);p(this,"x2",0);p(this,"y1",0);p(this,"y2",0);const o=e===" "||e==="|";this.id=t,this.sign=e===" "?"-":e,this.isKilled=o,this.isService=o}static getLifeLetters(e){return e.filter(t=>!t.isKilled)}}const tt={class:"canvas-letters"},st={id:"lettersEl",class:"letters"},it=["width","height"],ot={key:0,style:{position:"absolute",top:"0",left:"50%"}},at={__name:"CanvasAnimation",props:{shooter:{type:Object,default:()=>{}}},setup(i){const e=i,t=q();let o,c,r;const l=u(()=>t.getters["game/isDebug"]),g=u(()=>t.getters["game/shots"]),f=u(()=>t.getters["game/letters"]),x=u(()=>t.getters["game/barrier"]),b=u(()=>t.getters["game/circles"]),S=u(()=>t.getters["game/meteors"]),I=u(()=>t.getters["game/bullets"]),z=u(()=>t.getters["game/circlesLength"]),D=u(()=>t.getters["game/meteorsLength"]),H=u(()=>t.getters["game/bulletLength"]),$=u(()=>M.value.length>0||H.value>0||z.value>0||D.value>0),M=L([]),X=3,O=l.value?0:16;let y,C=0,B=0;const U="Hello, my name is Roman.|I am a Front-End developer with 12 years old experience.|SPA, SSR, SSG, js and Vue ... are my passion.|Check this out some projects on my Work page.|Feel free if you wanna say hello at kuzroman@list.ru then do it!)",E=s=>t.commit("game/setIsSeedsFalling",s),K=s=>t.commit("game/setIsGameFinished",s),W=s=>t.commit("game/setLetters",s),te=s=>t.commit("game/updateLetters",s),me=s=>t.commit("game/addCircle",s),_e=s=>t.commit("game/addMeteor",s),ve=s=>t.commit("game/addBullet",s),pe=s=>t.commit("game/removeCircle",s),ge=s=>t.commit("game/removeMeteors",s),fe=s=>t.commit("game/removeBullet",s),ye=s=>t.commit("game/showLetter",s),xe=s=>t.commit("game/killLetter",s),Se=s=>t.commit("game/increaseDamage",s);T(()=>g.value,()=>{ve(new Ze(e.shooter.x1,e.shooter.y1))}),T(()=>$.value,s=>{s&&se()});const Le=()=>{const s=Array.from(U,(a,h)=>new et(a,h));W(s)},we=s=>{const a=f.value[s.id];te({...a,...s}),be(s)},be=(s,a)=>{for(let h=0;h<X;h++){const k=new Je(s.x1,s.y1,a);M.value.push(k)}},Be=s=>{if(U.length-1<s)return;const a=f.value[s];ye(a),te(a)},se=()=>{E(!0);let s=0;clearInterval(r),r=setInterval(()=>{y.clearCanvas(C,B),Be(s++),Ie(),$e(),Me(),Ge(),$.value||(clearInterval(r),E(!1))},O)};function ke(s){s.updatePosition(),s.updateMeteorSize(),y.drawRing({x:s.x,y:s.y,size:s.size,color:"#fc0"})}const Ge=()=>{for(const s in S.value){const a=S.value[s];ke(a),Re(e.shooter,a),(a.size<.1||a.isInactive)&&ge(s)}},Ie=()=>{M.value=M.value.filter(s=>(s.update(x.value),y.drawRect(s.x1,s.y1,s.size),!s.isStopped))},$e=()=>{for(const s in I.value){const a=I.value[s];if(a.y1-=a.gravityY,y.drawRing({x:a.x1,y:a.y1,size:a.size,color:"#4cb977"}),a.y1<a.ground){fe(s);continue}f.value.length?Ce(a,f.value):K(!0)}},Me=()=>{for(const s in b.value){const a=b.value[s];a.size+=.5,a.thick-=.2,y.drawRing({x:a.x,y:a.y,size:a.size,color:!1,thick:a.thick,borderColor:"#fff"}),a.thick<a.endThick&&pe(s)}},Ce=(s,a)=>{a.forEach((h,k)=>{!h.isKilled&&s.y1<h.y1&&(s.x1<h.x1&&h.x1<s.x2||s.x1<h.x2&&h.x2<s.x2||h.x1<s.x1&&s.x2<h.x2)&&(xe(h),k%2===0&&me(new Xe(h.x1,h.y1)),Fe(h),o.replay())})},Fe=s=>{for(let a=0;a<3;a++)_e(new Oe({x:s.x1,y:s.y1}))},Re=(s,a)=>{s.y1<a.y&&s.x1<a.x&&a.x<s.x2&&(a.setInactive(),Se(a))},Te=()=>{y=new Qe("#canvas"),Le(),se()};return Q(()=>{C=window.innerWidth,B=window.innerHeight,o=new V(qe,.3),Te()}),J(()=>{clearInterval(c),o.destroy()}),(s,a)=>{const h=je;return d(),_("div",tt,[n("div",st,[(d(!0),_(Pe,null,Ae(m(f),k=>(d(),A(h,{key:k.id,"is-show":k.isShow,"is-killed":k.isKilled,sign:k.sign,"onLetterTag-Show":we},null,8,["is-show","is-killed","sign"]))),128))]),n("canvas",{id:"canvas",width:m(C),height:m(B)},null,8,it),m(l)?(d(),_("div",ot,[n("div",null,"hasElementsInAnimation: "+v(m($)),1),n("div",null,"seeds: "+v(m(M).length)+" | bullets: "+v(m(H)),1),n("div",null,"circles: "+v(m(z))+" | meteors: "+v(m(D)),1),n("div",null,"text "+v(U.length),1)])):G("",!0)])}}};const nt={name:"ButtonPlay",components:{UIButton:ue},props:{},data(){return{barrier:{},texts:{default:"Destroy this text",wait:"Wait for falling ...",again:"Close"}}},computed:{...Z("game",["isSeedsFalling","isGameReady","isGameFinished"]),text(){return this.isGameFinished?this.texts.again:this.isSeedsFalling?this.texts.wait:this.texts.default},stiles(){return{disabled:this.isSeedsFalling,hide:this.isGameReady&&!this.isGameFinished}}},mounted(){this.createBarrier(),this.setBarrier(this.barrier)},methods:{...ee("game",["setIsGameReady","setBarrier"]),handleClick(){if(!this.isSeedsFalling){if(this.isGameFinished){this.$emit("button-play--restart",this.barrier);return}setTimeout(()=>{this.setIsGameReady(!0)})}},createBarrier(){const i=this.$el.getBoundingClientRect();this.barrier={x1:i.left,x2:i.left+i.width,y1:i.top}}}},rt=["disabled"];function ct(i,e,t,o,c,r){const l=ue;return d(),_("div",{class:Y(["button-play",r.stiles]),disabled:i.isSeedsFalling,onClick:e[0]||(e[0]=(...g)=>r.handleClick&&r.handleClick(...g))},[w(l,{text:r.text,disabled:i.isSeedsFalling},null,8,["text","disabled"])],10,rt)}const lt=R(nt,[["render",ct]]);const dt={name:"UILoaderLine",props:{percent:{type:Number,default:50}},data(){return{}},computed:{width(){return`${this.percent}%`}}},ut={class:"ui-loader-line"};function ht(i,e,t,o,c,r){return d(),_("div",ut,[n("div",{class:"loader",style:ce({width:r.width})},null,4)])}const he=R(dt,[["render",ht]]);const mt={name:"IconTime"},_t={class:"icon-time",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},vt=n("path",{d:"M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448 c0,10.19-8.259,18.447-18.447,18.447c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699 c8.336,0,15.094-6.758,15.094-15.094S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448c0,10.19-8.259,18.447-18.447,18.447 c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699c8.336,0,15.094-6.758,15.094-15.094 S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444 l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z",fill:"#6a6a6a"},null,-1),pt=[vt];function gt(i,e,t,o,c,r){return d(),_("svg",_t,pt)}const ft=R(mt,[["render",gt]]);const yt={name:"IconShield"},xt=i=>(Ye("data-v-4739967d"),i=i(),He(),i),St={class:"icon-shield",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},Lt=xt(()=>n("path",{d:"M41.575,12.596c-3.887-1.112-6.776-2.975-9.326-4.616C29.669,6.317,27.442,4.882,25,4.882 c-2.441,0-4.668,1.435-7.248,3.094c-2.549,1.645-5.438,3.507-9.325,4.619l-1.324,0.378v1.376c0,0.691,0.033,5.652,0.086,6.479 c0.109,1.667,0.339,3.317,0.684,4.905c3.292,15.173,15.951,20.082,16.488,20.282L25,46.256l0.642-0.24 c0.536-0.2,13.193-5.105,16.486-20.282c0.345-1.588,0.575-3.237,0.684-4.905c0.055-0.825,0.086-5.787,0.086-6.479v-1.376 L41.575,12.596z M25,44.308V25.345H9.658C9.343,23.9,9.119,22.358,9.012,20.71c-0.049-0.75-0.084-5.567-0.084-6.36 C16.964,12.051,21.067,6.709,25,6.709V20.71v4.635h15.346C37.226,39.73,25,44.308,25,44.308z",fill:"#6a6a6a"},null,-1)),wt=[Lt];function bt(i,e,t,o,c,r){return d(),_("svg",St,wt)}const Bt=R(yt,[["render",bt],["__scopeId","data-v-4739967d"]]);const ne=100;let re;const kt={name:"StatusBar",components:{UI_Loader_line:he,UILink2Move:le,IconTime:ft,IconShield:Bt},data(){return{health:ne,isDebug:!1}},watch:{isGameStart(){this.runTimer()},damage(i){this.health=ne-i},health(i){i<=0&&this.setIsGameFinished(!0)}},computed:{...Z("game",["isGameReady","isGameStart","isGameFinished","score","shots","letters","killedLetters","damage","timeLeft"])},methods:{...ee("game",["setIsGameFinished","setIsLeaderBoardOpened","setScore","decreaseTimeLeft"]),runTimer(){re=setInterval(()=>{this.decreaseTimeLeft(),(this.timeLeft<=0||this.isGameFinished)&&(this.setIsGameFinished(!0),clearInterval(re))},1e3)},openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},Gt={class:"status-bar--top"},It={class:"score"},$t={class:"status-bar--right"},Mt={class:"time"};function Ct(i,e,t,o,c,r){const l=j("IconTime"),g=j("IconShield"),f=he,x=le;return d(),_("div",{class:Y(["status-bar",{active:i.isGameReady||c.isDebug}])},[n("div",Gt,[n("div",It,v(i.killedLetters.length)+" killed",1),n("div",$t,[w(l),w(g),n("div",Mt,v(i.timeLeft)+"s",1)])]),w(f,{class:"loader-Line",percent:c.health},null,8,["percent"]),w(x,{class:"leaders",text:"leaderboard",onClick:r.openLeaderBoard},null,8,["onClick"])],2)}const Ft=R(kt,[["render",Ct]]),Rt=""+new URL("damage.f1e615a0.mp3",import.meta.url).href;const Tt={__name:"RobotShooter",props:{position:{type:Object,default:{}}},setup(i,{expose:e}){const t=i,o=q();let c;const r=L(!1),l=L(null),g=u(()=>o.getters["game/isGameReady"]),f=u(()=>o.getters["game/isGameFinished"]),x=u(()=>o.getters["game/damage"]),b=u(()=>({left:t.position.x1+"px"})),S=u(()=>({active:g.value&&!f.value,damage:r.value})),I=()=>{r.value=!0,setTimeout(()=>{r.value=!1},300)};return T(()=>x.value,()=>{I(),c.replay()}),Q(()=>{c=new V(Rt,.3)}),J(()=>{c.destroy()}),e({shooter:l}),(z,D)=>(d(),_("div",{ref_key:"shooter",ref:l,class:Y(["robot-shooter",m(S)]),style:ce(m(b))},null,6))}};const zt={},Dt={class:"ui-dashed-list"};function Ut(i,e){return d(),_("div",Dt,[Ee(i.$slots,"default")])}const Pt=R(zt,[["render",Ut]]);const At={name:"ScoreBoard",components:{DashedList:Pt},data(){return{isDebug:!1}},computed:{...Z("game",["isGameFinished","timeLeft","damage","shots","letters","killedLetters","aliveLetters","score"]),score(){if(this.aliveLetters.length,!this.killedLetters.length)return 0;const i=Math.ceil(this.killedLetters.length*1e4/(this.aliveLetters.length+this.shots));return Math.floor(i+this.bonusForLife+this.bonusForTime)},bonusForTime(){return Math.floor(this.timeLeft*200)},bonusForLife(){return Math.floor((100-this.damage)*50)},isCurrentScoreBest(){return this.bestScoreFromLocalStorage<this.score},bestScoreFromLocalStorage(){return+this.getBestScoreFromLocalStorage()},bestScore(){return this.isCurrentScoreBest?this.score:this.bestScoreFromLocalStorage}},watch:{score(i){this.setScore(i),this.setBestScoreToLocalStore(i)}},methods:{...ee("game",["setScore","setIsLeaderBoardOpened"]),openLeaderBoard(){this.setIsLeaderBoardOpened(!0)},getBestScoreFromLocalStorage(){return localStorage.getItem("bestScore")},setBestScoreToLocalStore(i){this.isCurrentScoreBest&&localStorage.setItem("bestScore",i)}}},Yt={class:"score"},Ht={class:"hooray"},Et=n("div",null,"Hooray!",-1),Nt={key:0,class:"mt-4"},Vt={class:"result"},Xt=n("div",null,"Time left",-1),Ot={class:"result"},Kt=n("div",null,"Shots",-1),Wt={class:"result"},jt=n("div",null,"Goals",-1),qt={class:"result"},Qt=n("div",null,"Life",-1),Jt={key:0,class:"result bonus"},Zt=n("div",null,"Bonus for survival 🎉",-1),es={key:1,class:"result bonus"},ts=n("div",null,"Bonus for speed 🎉",-1),ss={class:"result best"},is=n("div",null,"Your best score",-1);function os(i,e,t,o,c,r){const l=j("DashedList");return d(),_("div",{class:Y(["score-board",{active:i.isGameFinished||c.isDebug}])},[n("h3",Yt,v(r.score)+" points",1),n("div",Ht,[Et,r.isCurrentScoreBest?(d(),_("div",Nt," You've just beaten your own highscore 🎉🎉🎉 ")):G("",!0)]),w(l,null,{default:de(()=>[n("div",Vt,[Xt,n("div",null,v(i.timeLeft),1)]),n("div",Ot,[Kt,n("div",null,v(i.shots),1)]),n("div",Wt,[jt,n("div",null,v(i.killedLetters.length),1)]),n("div",qt,[Qt,n("div",null,v(100-i.damage),1)]),r.bonusForLife?(d(),_("div",Jt,[Zt,n("div",null,v(r.bonusForLife),1)])):G("",!0),r.bonusForTime?(d(),_("div",es,[ts,n("div",null,v(r.bonusForTime),1)])):G("",!0),n("div",ss,[is,n("div",null,v(r.bestScore),1)])]),_:1})],2)}const as=R(At,[["render",os]]),ns=""+new URL("shoot.6b00b3bd.mp3",import.meta.url).href,rs=""+new URL("backgroundGame.c17ea688.mp3",import.meta.url).href;const cs={__name:"MainGame",setup(i){const e=q();let t,o;const c=L({}),r=L(0),l=L(null),g=u(()=>e.getters["game/isGameStart"]),f=u(()=>e.getters["game/isGameFinished"]),x=u(()=>e.getters["game/isGameReady"]),b=u(()=>e.getters["app/isPageAnimationFinished"]),S=y=>e.commit("game/setIsGameStart",y),I=()=>e.commit("game/resetStateGame"),z=()=>e.commit("game/increaseShoots"),D=()=>e.commit("leaderBoard/resetStateLeaderBoard"),H=()=>{r.value+=1},$=()=>{D(),I(),H(),o.destroy(),t.destroy()},M=()=>{!x.value||f.value||(g.value||S(!0),z(),t.replay())},X=y=>{var B;if(!((B=l==null?void 0:l.value)!=null&&B.shooter))return;const C=l.value.shooter;c.value={x1:y.clientX,y1:C.getBoundingClientRect().top,x2:y.clientX+C.offsetWidth}},O=()=>{let y;window.addEventListener("resize",()=>{clearTimeout(y),y=setTimeout(()=>{$()},300)})};return Q(()=>{t=new V(ns,.3),o=new V(rs,.5,!0),O()}),J(()=>{$()}),T(()=>x.value,()=>{o.replay()}),T(()=>f.value,()=>{o.pause()}),(y,C)=>{const B=at,U=lt,E=Ft,K=Tt,W=as;return d(),_("div",{key:m(r),class:"main-game",onClick:M,onMousemove:X},[w(B,{shooter:m(c)},null,8,["shooter"]),w(Ne,null,{default:de(()=>[m(b)?(d(),A(U,{key:0,"onButtonPlay-Restart":$})):G("",!0)]),_:1}),m(x)?(d(),A(E,{key:0})):G("",!0),m(x)?(d(),A(K,{key:1,ref_key:"shooter",ref:l,position:m(c)},null,8,["position"])):G("",!0),m(f)?(d(),A(W,{key:2})):G("",!0)],32)}}},ls={class:"page-game"},ds=n("div",{class:"stars-box"},[n("div",{id:"stars"}),n("div",{id:"stars2"}),n("div",{id:"stars3"})],-1),ps=Ve({__name:"index",setup(i){return Ke({title:"Hi! Nice to meet you =)"}),(e,t)=>{const o=cs;return d(),_("div",ls,[w(o),ds])}}});export{ps as default};
