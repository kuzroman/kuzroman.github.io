var ze=Object.defineProperty;var De=(s,e,a)=>e in s?ze(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var v=(s,e,a)=>(De(s,typeof e!="symbol"?e+"":e,a),a),se=(s,e,a)=>{if(!e.has(s))throw TypeError("Cannot "+a)};var E=(s,e,a)=>(se(s,e,"read from private field"),a?a.call(s):e.get(s)),ae=(s,e,a)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,a)},ie=(s,e,a,i)=>(se(s,e,"write to private field"),i?i.call(s,a):e.set(s,a),a);import{r as m,l as Te,q as d,w as U,o as _,a as g,t as y,K as F,u as p,L as T,v as W,x as j,p as q,e as r,F as Ue,b as Ye,c as ce,z as le,C as B,M as J,J as Q,h as L,E as de,A as He,B as Pe,N as ue,O as K,D as Ae,H as he,T as Ee,f as Ne}from"./entry.e1ffed5c.js";import{C as Oe,M as Ve}from"./Meteor.e1521d04.js";import{u as Xe}from"./composables.de7b3a93.js";const Ke={key:1},We={__name:"LetterTag",props:{sign:{type:String,default:" "},isKilled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1}},emits:["letter-tag--show"],setup(s,{emit:e}){const a=s,i=m(null),c=m(null),o=m(null),l=m(null),u=m(null),w=m(Te().vnode.key),x=d(()=>[{show:a.isShow},{hide:a.isKilled}]),k=()=>{if(!i.value)return;const S=i.value.getBoundingClientRect();c.value=Math.ceil(S.left),l.value=Math.ceil(S.top),o.value=Math.ceil(S.left+i.value.clientWidth),u.value=Math.ceil(S.top+i.value.clientHeight)};return U(()=>a.isShow,()=>{k(),!(!c.value||!l.value)&&e("letter-tag--show",{x1:c.value,x2:o.value,y1:l.value,y2:u.value,id:w.value})}),(S,b)=>s.sign!=="|"?(_(),g("div",{key:0,ref_key:"letterEl",ref:i,class:F(["letter-tag",p(x)])},y(s.sign),3)):(_(),g("br",Ke))}};class N{constructor(e,a=1,i=!1){this.audio=new Audio(e),this.audio.volume=a,this.audio.loop=i}isPlaying(){return this.audio.duration>0&&!this.audio.paused}play(e=()=>{}){this.audio.play().then(a=>e(a))}pause(){this.audio.pause()}replay(){this.audio.currentTime=0,this.play()}destroy(){this.audio.remove()}}const je=""+new URL("explode.1718f901.mp3",import.meta.url).href;var R;class qe{constructor(e){ae(this,R,void 0);v(this,"ctx");ie(this,R,document.querySelector(e)),this.ctx=E(this,R).getContext("2d")}drawRect(e,a,i,c){this.ctx.fillStyle=c||"#fff",this.ctx.fillRect(e,a,i,i)}drawRing(e){const{x:a,y:i,size:c,color:o,thick:l,borderColor:u}=e;this.ctx.beginPath(),this.ctx.arc(a,i,c,0,2*Math.PI),o&&(this.ctx.fillStyle=o,this.ctx.fill()),l&&(this.ctx.lineWidth=l),u&&(this.ctx.strokeStyle=u,this.ctx.stroke())}clearCanvas(e=E(this.ctx,R).width,a=E(this.ctx,R).height){this.ctx.clearRect(0,0,e,a)}}R=new WeakMap;class Je{constructor(e,a,i="default"){v(this,"ground",document.body.offsetHeight);v(this,"gravityX",T(1,5));v(this,"gravityY",T(1,5));v(this,"speed",T(2,5)/10);v(this,"bounceNum",0);v(this,"maxBounceNum",5);v(this,"revert",!1);this.x1=e||0,this.y1=a||0,this.size=T(1,3),this.isStopped=!1,this.direction=Math.random()<.6?1:-1,this.type=i}update(e){this.type==="shrapnel"?this._updateShrapnel():this._updateSeed(e)}_updateSeed(e){if(this._isBarrier(e)&&(this.revert=!0,this.bounceNum+=1),this.gravityY<0&&(this.revert=!1),this._isBounceLimitReached()||this._isUnderGround()){this.isStopped=!0;return}this._move()}_updateShrapnel(){if(this._isUnderGround()){this.isStopped=!0;return}this._fallDown(this.direction,!0)}_isBounceLimitReached(){return this.maxBounceNum<this.bounceNum}_isUnderGround(){return this.ground<this.y1}_isBarrier(e){return e?this.y1>=e.y1&&e.x1<this.x1&&this.x1<e.x2:!1}_move(){this.revert?this._fallUp():this._fallDown()}_fallDown(e,a){this._moveX(e,a),this.y1+=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY+this.speed)*100)/100}_fallUp(e){this._moveX(e),this.y1-=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY-1)*100)/100}_moveX(e=1,a=!1){const i=a?T(2,8):7;this.x1+=e*Math.round(this.gravityX/i),this.gravityX=Math.round((this.gravityX+this.speed)*100)/100}}class Qe{constructor(e,a){v(this,"gravityY",10);v(this,"ground",-20);this.x1=e,this.x2=e+6,this.y1=a,this.size=6,this.isStopped=!1}update(){if(this._isOverScreen()){this.isStopped=!0;return}this._move()}_move(){this._moveY()}_moveY(){this.y1-=Math.round(this.gravityY)}_isOverScreen(){return this.y1<this.ground}}class ne{constructor(e,a){v(this,"isShow",!1);v(this,"x1",0);v(this,"x2",0);v(this,"y1",0);v(this,"y2",0);const i=e===" "||e==="|";this.id=a,this.sign=e===" "?"-":e,this.isKilled=i,this.isService=i}static getLifeLetters(e){return e.filter(a=>!a.isKilled)}}const Ze={class:"canvas-letters"},et={id:"lettersEl",class:"letters"},tt=["width","height"],st={key:0,style:{position:"absolute",top:"0",left:"50%"}},at={__name:"CanvasLetters",props:{shooter:{type:Object,default:()=>{}}},emits:["canvas-letters-damage"],setup(s,{emit:e}){const a=s,i=W();let c,o,l;const u=d(()=>i.getters["game/isDebug"]),w=d(()=>i.getters["game/shots"]),x=d(()=>i.getters["game/letters"]),k=d(()=>i.getters["game/barrier"]),S=d(()=>i.getters["game/circles"]),b=d(()=>i.getters["game/meteors"]),z=d(()=>i.getters["game/circlesLength"]),D=d(()=>i.getters["game/meteorsLength"]),Y=d(()=>$.value.length>0||M.value.length>0||z.value>0||D.value>0),$=m([]),M=m([]),O=m(3),H=m(u.value?0:16),f=m(null),C=m(0),I=m(0),P="Hello, my name is Roman.|I am a Front-End developer with 12 years old experience.|SPA, SSR, SSG, js and Vue ... are my passion.|Check this out some projects on my Work page.|Feel free if you wanna say hello at kuzroman@list.ru then do it!)",V=d(()=>(u.value,P)),A=t=>i.commit("game/setIsSeedsFall",t),X=t=>i.commit("game/setIsGameFinished",t),_e=t=>i.commit("game/setLetters",t),ee=t=>i.commit("game/updateLetters",t),ve=t=>i.commit("game/addCircle",t),pe=t=>i.commit("game/addMeteor",t),ge=t=>i.commit("game/removeCircle",t),fe=t=>i.commit("game/removeMeteors",t),ye=t=>i.commit("game/showLetter",t),xe=t=>i.commit("game/killLetter",t);U(()=>w.value,()=>{const t=new Qe(a.shooter.x1,a.shooter.y1);M.value.push(t),te()});const Se=()=>{const t=Array.from(V.value,(n,h)=>new ne(n,h));_e(t)},Le=()=>{let t=0,n;o=setInterval(()=>{t<=x.value.length-1?(n=x.value[t],ye(n),ee(n)):clearInterval(o),t++},H.value)},we=t=>{const n=x.value[t.id];ee({...n,...t}),$e(t)},$e=(t,n)=>{for(let h=0;h<O.value;h++){const G=new Je(t.x1,t.y1,n);$.value.push(G)}},te=()=>{A(!0),clearInterval(l),l=setInterval(()=>{f.value.clearCanvas(C.value,I.value),Be(),ke(),be(),Ie(),Y.value||(clearInterval(l),A(!1))},H.value)};function Ge(t){t.updatePosition(),t.updateSize(),f.value.drawRing({x:t.x,y:t.y,size:t.size,color:"#fc0"})}const Ie=()=>{for(const t in b.value){const n=b.value[t];if(Ge(n),n.size<.1||n.isInactive){fe(t);continue}Re(a.shooter,n)}},Be=()=>{$.value=$.value.filter(t=>(t.update(k.value),f.value.drawRect(t.x1,t.y1,t.size),!t.isStopped))},ke=()=>{M.value=M.value.filter(t=>{t.update();const n=ne.getLifeLetters(x.value);return n.length?Me(t,n):X(!0),f.value.drawRing({x:t.x1,y:t.y1,size:t.size,color:"#4cb977"}),!t.isStopped})},be=()=>{for(const t in S.value){const n=S.value[t];n.size+=.5,n.thick-=.2,f.value.drawRing({x:n.x,y:n.y,size:n.size,color:!1,thick:n.thick,borderColor:"#fff"}),n.thick<n.endThick&&ge(t)}},Me=(t,n)=>{n.forEach((h,G)=>{t.y1<h.y1&&(t.x1<h.x1&&h.x1<t.x2||t.x1<h.x2&&h.x2<t.x2||h.x1<t.x1&&t.x2<h.x2)&&(xe(h),G%2===0&&ve(new Oe(h.x1,h.y1)),G%4===0&&Ce(h),c.replay())})},Ce=t=>{for(let n=0;n<10;n++)pe(new Ve({x:t.x1,y:t.y1}))},Re=(t,n)=>{t.y1<n.y&&t.x1<n.x&&n.x<t.x2&&(n.setInactive(),e("canvas-letters-damage"))},Fe=()=>{f.value=new qe("#canvas"),Se(),Le(),te()};return j(()=>{C.value=window.innerWidth,I.value=window.innerHeight,c=new N(je,.3),Fe()}),q(()=>{clearInterval(o),c.destroy()}),(t,n)=>{const h=We;return _(),g("div",Ze,[r("div",et,[(_(!0),g(Ue,null,Ye(p(x),G=>(_(),ce(h,{key:G.id,"is-show":G.isShow,"is-killed":G.isKilled,sign:G.sign,"onLetterTag-Show":we},null,8,["is-show","is-killed","sign"]))),128))]),r("canvas",{id:"canvas",width:p(C),height:p(I)},null,8,tt),p(u)?(_(),g("div",st,[r("div",null,"hasElementsInAnimation: "+y(p(Y)),1),r("div",null,"seeds: "+y(p($).length)+" | bullets: "+y(p(M).length),1),r("div",null,"circles: "+y(p(z))+" | meteors: "+y(p(D)),1)])):le("",!0)])}}};const it={name:"UIButton",props:{text:{type:String,default:"Button"},disabled:{type:Boolean,default:!1}},data(){return{}},computed:{},methods:{}};function nt(s,e,a,i,c,o){return _(),g("div",{class:F(["ui-button",{disabled:a.disabled}])},y(a.text),3)}const Z=B(it,[["render",nt]]);const ot={name:"ButtonPlay",components:{UIButton:Z},props:{},data(){return{barrier:{},texts:{default:"Destroy this text",wait:"Wait for falling ...",again:"Close"}}},computed:{...J("game",["isSeedsFall","isGameReady","isGameFinished"]),text(){return this.isGameFinished?this.texts.again:this.isSeedsFall?this.texts.wait:this.texts.default},disabled(){return this.isSeedsFall},stiles(){return{disabled:this.disabled,hide:this.isGameReady&&!this.isGameFinished}}},mounted(){this.createBarrier(),this.setBarrier(this.barrier)},methods:{...Q("game",["setIsGameReady","setBarrier"]),handleClick(){if(!this.isSeedsFall){if(this.isGameFinished){this.$emit("button-play--restart",this.barrier);return}setTimeout(()=>{this.setIsGameReady(!0)})}},createBarrier(){const s=this.$el.getBoundingClientRect();this.barrier={x1:s.left,x2:s.left+s.width,y1:s.top}}}},rt=["disabled"];function ct(s,e,a,i,c,o){const l=Z;return _(),g("div",{class:F(["button-play",o.stiles]),disabled:o.disabled,onClick:e[0]||(e[0]=(...u)=>o.handleClick&&o.handleClick(...u))},[L(l,{text:o.text,disabled:o.disabled},null,8,["text","disabled"])],10,rt)}const lt=B(ot,[["render",ct]]);const dt={name:"UILoaderLine",props:{percent:{type:Number,default:50}},data(){return{}},computed:{width(){return`${this.percent}%`}}},ut={class:"ui-loader-line"};function ht(s,e,a,i,c,o){return _(),g("div",ut,[r("div",{class:"loader",style:de({width:o.width})},null,4)])}const me=B(dt,[["render",ht]]);const mt={name:"IconTime"},_t={class:"icon-time",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},vt=r("path",{d:"M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448 c0,10.19-8.259,18.447-18.447,18.447c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699 c8.336,0,15.094-6.758,15.094-15.094S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448c0,10.19-8.259,18.447-18.447,18.447 c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699c8.336,0,15.094-6.758,15.094-15.094 S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444 l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z",fill:"#6a6a6a"},null,-1),pt=[vt];function gt(s,e,a,i,c,o){return _(),g("svg",_t,pt)}const ft=B(mt,[["render",gt]]);const yt={name:"IconShield"},xt=s=>(He("data-v-4739967d"),s=s(),Pe(),s),St={class:"icon-shield",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},Lt=xt(()=>r("path",{d:"M41.575,12.596c-3.887-1.112-6.776-2.975-9.326-4.616C29.669,6.317,27.442,4.882,25,4.882 c-2.441,0-4.668,1.435-7.248,3.094c-2.549,1.645-5.438,3.507-9.325,4.619l-1.324,0.378v1.376c0,0.691,0.033,5.652,0.086,6.479 c0.109,1.667,0.339,3.317,0.684,4.905c3.292,15.173,15.951,20.082,16.488,20.282L25,46.256l0.642-0.24 c0.536-0.2,13.193-5.105,16.486-20.282c0.345-1.588,0.575-3.237,0.684-4.905c0.055-0.825,0.086-5.787,0.086-6.479v-1.376 L41.575,12.596z M25,44.308V25.345H9.658C9.343,23.9,9.119,22.358,9.012,20.71c-0.049-0.75-0.084-5.567-0.084-6.36 C16.964,12.051,21.067,6.709,25,6.709V20.71v4.635h15.346C37.226,39.73,25,44.308,25,44.308z",fill:"#6a6a6a"},null,-1)),wt=[Lt];function $t(s,e,a,i,c,o){return _(),g("svg",St,wt)}const Gt=B(yt,[["render",$t],["__scopeId","data-v-4739967d"]]);const oe=100;let re;const It={name:"StatusBar",components:{UI_Loader_line:me,UILink2Move:ue,IconTime:ft,IconShield:Gt},data(){return{health:oe,isDebug:!1}},watch:{isGameStart(){this.runTimer()},damage(s){this.health=oe-s},health(s){s<=0&&this.setIsGameFinished(!0)}},computed:{...J("game",["isGameReady","isGameStart","isGameFinished","score","shots","letters","killedLetters","damage","timeLeft"])},methods:{...Q("game",["setIsGameFinished","setIsLeaderBoardOpened","setScore","decreaseTimeLeft"]),runTimer(){re=setInterval(()=>{this.decreaseTimeLeft(),(this.timeLeft<=0||this.isGameFinished)&&(this.setIsGameFinished(!0),clearInterval(re))},1e3)},openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},Bt={class:"status-bar--top"},kt={class:"score"},bt={class:"status-bar--right"},Mt={class:"time"};function Ct(s,e,a,i,c,o){const l=K("IconTime"),u=K("IconShield"),w=me,x=ue;return _(),g("div",{class:F(["status-bar",{active:s.isGameReady||c.isDebug}])},[r("div",Bt,[r("div",kt,y(s.killedLetters.length)+" killed",1),r("div",bt,[L(l),L(u),r("div",Mt,y(s.timeLeft)+"s",1)])]),L(w,{class:"loader-Line",percent:c.health},null,8,["percent"]),L(x,{class:"leaders",text:"leaderboard",onClick:o.openLeaderBoard},null,8,["onClick"])],2)}const Rt=B(It,[["render",Ct]]),Ft=""+new URL("damage.f1e615a0.mp3",import.meta.url).href;const zt={__name:"RobotShooter",props:{position:{type:Object,default:{}}},setup(s,{expose:e}){const a=s,i=W();let c;const o=m(!1),l=m(null),u=d(()=>i.getters["game/isGameReady"]),w=d(()=>i.getters["game/isGameFinished"]),x=d(()=>i.getters["game/damage"]),k=d(()=>({left:a.position.x1+"px"})),S=d(()=>({active:u.value&&!w.value,damage:o.value})),b=()=>{o.value=!0,setTimeout(()=>{o.value=!1},300)};return U(()=>x.value,()=>{b(),c.replay()}),j(()=>{c=new N(Ft,.3)}),q(()=>{c.destroy()}),e({shooter:l}),(z,D)=>(_(),g("div",{ref_key:"shooter",ref:l,class:F(["robot-shooter",p(S)]),style:de(p(k))},null,6))}};const Dt={},Tt={class:"ui-dashed-list"};function Ut(s,e){return _(),g("div",Tt,[Ae(s.$slots,"default")])}const Yt=B(Dt,[["render",Ut]]);const Ht={name:"ScoreBoard",components:{UIButton:Z,DashedList:Yt},data(){return{isDebug:!1}},watch:{score(s){this.setScore(s)}},computed:{...J("game",["isGameFinished","timeLeft","damage","shots","letters","killedLetters","aliveLetters","score"]),score(){if(this.aliveLetters.length,!this.killedLetters.length)return 0;const s=Math.ceil(this.killedLetters.length*1e4/(this.aliveLetters.length+this.shots)),e=this.timeLeft*10-this.damage*5;return s+e}},methods:{...Q("game",["setScore","setIsLeaderBoardOpened"]),openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},Pt=r("div",{class:"hooray"},"Hooray!",-1),At={class:"result"},Et=r("div",null,"Time left",-1),Nt={class:"result"},Ot=r("div",null,"Shots",-1),Vt={class:"result"},Xt=r("div",null,"Goals",-1),Kt={class:"result"},Wt=r("div",null,"Life",-1),jt={class:"result best"},qt=r("div",null,"Your best score",-1);function Jt(s,e,a,i,c,o){const l=K("DashedList");return _(),g("div",{class:F(["score-board",{active:s.isGameFinished||c.isDebug}])},[r("h3",null,y(o.score)+" points",1),Pt,L(l,null,{default:he(()=>[r("div",At,[Et,r("div",null,y(s.timeLeft),1)]),r("div",Nt,[Ot,r("div",null,y(s.shots),1)]),r("div",Vt,[Xt,r("div",null,y(s.killedLetters.length),1)]),r("div",Kt,[Wt,r("div",null,y(100-s.damage),1)]),r("div",jt,[qt,r("div",null,y(o.score),1)])]),_:1})],2)}const Qt=B(Ht,[["render",Jt]]),Zt=""+new URL("shoot.6b00b3bd.mp3",import.meta.url).href,es=""+new URL("backgroundGame.c17ea688.mp3",import.meta.url).href;const ts={__name:"MainGame",setup(s){const e=W();let a,i;const c=m({}),o=m(0),l=m(null),u=d(()=>e.getters["game/isGameFinished"]),w=d(()=>e.getters["game/isGameReady"]),x=d(()=>e.getters["app/isPageAnimationFinished"]),k=f=>e.commit("game/setIsGameStart",f),S=()=>e.commit("game/resetStateGame"),b=()=>e.commit("game/increaseShoots"),z=()=>e.commit("game/increaseDamage"),D=()=>e.commit("leaderBoard/resetStateLeaderBoard"),Y=()=>{o.value+=1},$=()=>{D(),S(),Y(),i.destroy(),a.destroy()},M=()=>{!w.value||u.value||(k(!0),b(),a.replay())},O=f=>{var I;if(!((I=l==null?void 0:l.value)!=null&&I.shooter))return;const C=l.value.shooter;c.value={x1:f.clientX,y1:C.getBoundingClientRect().top,x2:f.clientX+C.offsetWidth}},H=()=>{let f;window.addEventListener("resize",()=>{clearTimeout(f),f=setTimeout(()=>{$()},300)})};return j(()=>{a=new N(Zt,.3),i=new N(es,.5,!0),H()}),q(()=>{$()}),U(()=>w.value,()=>{i.replay()}),U(()=>u.value,()=>{i.pause()}),(f,C)=>{const I=at,P=lt,V=Rt,A=zt,X=Qt;return _(),g("div",{key:p(o),class:"main-game",onClick:M,onMousemove:O},[L(I,{shooter:p(c),onCanvasLettersDamage:z},null,8,["shooter"]),L(Ee,null,{default:he(()=>[p(x)?(_(),ce(P,{key:0,"onButtonPlay-Restart":$})):le("",!0)]),_:1}),L(V),L(A,{ref_key:"shooter",ref:l,position:p(c)},null,8,["position"]),L(X)],32)}}},ss={class:"page-game"},as=r("div",{class:"stars-box"},[r("div",{id:"stars"}),r("div",{id:"stars2"}),r("div",{id:"stars3"})],-1),cs=Ne({__name:"index",setup(s){return Xe({title:"Hi! Nice to meet you =)"}),(e,a)=>{const i=ts;return _(),g("div",ss,[L(i),as])}}});export{cs as default};
