var ze=Object.defineProperty;var De=(s,e,a)=>e in s?ze(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var v=(s,e,a)=>(De(s,typeof e!="symbol"?e+"":e,a),a),se=(s,e,a)=>{if(!e.has(s))throw TypeError("Cannot "+a)};var E=(s,e,a)=>(se(s,e,"read from private field"),a?a.call(s):e.get(s)),ae=(s,e,a)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,a)},ie=(s,e,a,i)=>(se(s,e,"write to private field"),i?i.call(s,a):e.set(s,a),a);import{r as m,l as Te,q as d,w as T,o as _,a as g,t as y,K as U,u as p,L as D,v as W,x as j,p as q,e as o,F as Ue,b as Ye,c as ce,z as le,C as B,M as J,J as Q,h as L,E as de,A as He,B as Pe,N as ue,O as K,D as Ae,H as he,T as Ee,f as Ne}from"./entry.ecafaa21.js";import{C as Oe,M as Ve}from"./Meteor.2b21cea8.js";import{u as Xe}from"./composables.a398678d.js";const Ke={key:1},We={__name:"LetterTag",props:{sign:{type:String,default:" "},isKilled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1}},emits:["letter-tag--show"],setup(s,{emit:e}){const a=s,i=m(null),c=m(null),r=m(null),l=m(null),u=m(null),w=m(Te().vnode.key),x=d(()=>[{show:a.isShow},{hide:a.isKilled}]),k=()=>{if(!i.value)return;const S=i.value.getBoundingClientRect();c.value=Math.ceil(S.left),l.value=Math.ceil(S.top),r.value=Math.ceil(S.left+i.value.clientWidth),u.value=Math.ceil(S.top+i.value.clientHeight)};return T(()=>a.isShow,()=>{k(),!(!c.value||!l.value)&&e("letter-tag--show",{x1:c.value,x2:r.value,y1:l.value,y2:u.value,id:w.value})}),(S,M)=>s.sign!=="|"?(_(),g("div",{key:0,ref_key:"letterEl",ref:i,class:U(["letter-tag",p(x)])},y(s.sign),3)):(_(),g("br",Ke))}};class N{constructor(e,a=1,i=!1){this.audio=new Audio(e),this.audio.volume=a,this.audio.loop=i}isPlaying(){return this.audio.duration>0&&!this.audio.paused}play(e=()=>{}){this.audio.play().then(a=>e(a))}pause(){this.audio.pause()}replay(){this.audio.currentTime=0,this.play()}destroy(){this.audio.remove()}}const je=""+new URL("explode.1718f901.mp3",import.meta.url).href;var R;class qe{constructor(e){ae(this,R,void 0);v(this,"ctx");ie(this,R,document.querySelector(e)),this.ctx=E(this,R).getContext("2d")}drawRect(e,a,i,c){this.ctx.fillStyle=c||"#fff",this.ctx.fillRect(e,a,i,i)}drawRing(e){const{x:a,y:i,size:c,color:r,thick:l,borderColor:u}=e;this.ctx.beginPath(),this.ctx.arc(a,i,c,0,2*Math.PI),r&&(this.ctx.fillStyle=r,this.ctx.fill()),l&&(this.ctx.lineWidth=l),u&&(this.ctx.strokeStyle=u,this.ctx.stroke())}clearCanvas(e=E(this.ctx,R).width,a=E(this.ctx,R).height){this.ctx.clearRect(0,0,e,a)}}R=new WeakMap;class Je{constructor(e,a,i="default"){v(this,"ground",document.body.offsetHeight);v(this,"gravityX",D(1,5));v(this,"gravityY",D(1,5));v(this,"speed",D(2,5)/10);v(this,"bounceNum",0);v(this,"maxBounceNum",5);v(this,"revert",!1);this.x1=e||0,this.y1=a||0,this.size=D(1,3),this.isStopped=!1,this.direction=Math.random()<.6?1:-1,this.type=i}update(e){this.type==="shrapnel"?this._updateShrapnel():this._updateSeed(e)}_updateSeed(e){if(this._isBarrier(e)&&(this.revert=!0,this.bounceNum+=1),this.gravityY<0&&(this.revert=!1),this._isBounceLimitReached()||this._isUnderGround()){this.isStopped=!0;return}this._move()}_updateShrapnel(){if(this._isUnderGround()){this.isStopped=!0;return}this._fallDown(this.direction,!0)}_isBounceLimitReached(){return this.maxBounceNum<this.bounceNum}_isUnderGround(){return this.ground<this.y1}_isBarrier(e){return e?this.y1>=e.y1&&e.x1<this.x1&&this.x1<e.x2:!1}_move(){this.revert?this._fallUp():this._fallDown()}_fallDown(e,a){this._moveX(e,a),this.y1+=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY+this.speed)*100)/100}_fallUp(e){this._moveX(e),this.y1-=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY-1)*100)/100}_moveX(e=1,a=!1){const i=a?D(2,8):7;this.x1+=e*Math.round(this.gravityX/i),this.gravityX=Math.round((this.gravityX+this.speed)*100)/100}}class Qe{constructor(e,a){v(this,"gravityY",10);v(this,"ground",-20);this.x1=e,this.x2=e+6,this.y1=a,this.size=6,this.isStopped=!1}update(){if(this._isOverScreen()){this.isStopped=!0;return}this._move()}_move(){this._moveY()}_moveY(){this.y1-=Math.round(this.gravityY)}_isOverScreen(){return this.y1<this.ground}}class ne{constructor(e,a){v(this,"isShow",!1);v(this,"x1",0);v(this,"x2",0);v(this,"y1",0);v(this,"y2",0);const i=e===" "||e==="|";this.id=a,this.sign=e===" "?"-":e,this.isKilled=i,this.isService=i}static getLifeLetters(e){return e.filter(a=>!a.isKilled)}}const Ze={class:"canvas-letters"},et={id:"lettersEl",class:"letters"},tt=["width","height"],st={key:0,style:{position:"absolute",top:"0",left:"50%"}},at={__name:"CanvasLetters",props:{shooter:{type:Object,default:()=>{}}},emits:["canvas-letters-damage"],setup(s,{emit:e}){const a=s,i=W();let c,r,l;const u=d(()=>i.getters["game/isDebug"]),w=d(()=>i.getters["game/shots"]),x=d(()=>i.getters["game/letters"]),k=d(()=>i.getters["game/barrier"]),S=d(()=>i.getters["game/circles"]),M=d(()=>i.getters["game/meteors"]),F=d(()=>i.getters["game/circlesLength"]),z=d(()=>i.getters["game/meteorsLength"]),Y=d(()=>$.value.length>0||b.value.length>0||F.value>0||z.value>0),$=m([]),b=m([]),O=m(3),H=m(u.value?0:16),f=m(null),C=m(0),I=m(0),P="Hello, my name is Roman.|I am a Front-End developer with 12 years old experience.|SPA, SSR, SSG, js and Vue ... are my passion.|Check this out some projects on my Work page.|Feel free if you wanna say hello at kuzroman@list.ru then do it!)",V=d(()=>(u.value,P)),A=t=>i.commit("game/setIsSeedsFall",t),X=t=>i.commit("game/setIsGameFinished",t),_e=t=>i.commit("game/setLetters",t),ee=t=>i.commit("game/updateLetters",t),ve=t=>i.commit("game/addCircle",t),pe=t=>i.commit("game/addMeteor",t),ge=t=>i.commit("game/removeCircle",t),fe=t=>i.commit("game/removeMeteors",t),ye=t=>i.commit("game/showLetter",t),xe=t=>i.commit("game/killLetter",t);T(()=>w.value,()=>{const t=new Qe(a.shooter.x1,a.shooter.y1);b.value.push(t),te()});const Se=()=>{const t=Array.from(V.value,(n,h)=>new ne(n,h));_e(t)},Le=()=>{let t=0,n;r=setInterval(()=>{t<=x.value.length-1?(n=x.value[t],ye(n),ee(n)):clearInterval(r),t++},H.value)},we=t=>{const n=x.value[t.id];ee({...n,...t}),$e(t)},$e=(t,n)=>{for(let h=0;h<O.value;h++){const G=new Je(t.x1,t.y1,n);$.value.push(G)}},te=()=>{A(!0),clearInterval(l),l=setInterval(()=>{f.value.clearCanvas(C.value,I.value),Be(),ke(),Me(),Ie(),Y.value||(clearInterval(l),A(!1))},H.value)};function Ge(t){t.updatePosition(),t.updateSize(),f.value.drawRing({x:t.x,y:t.y,size:t.size,color:"#fc0"})}const Ie=()=>{for(const t in M.value){const n=M.value[t];if(Ge(n),n.size<.1||n.isInactive){fe(t);continue}Re(a.shooter,n)}},Be=()=>{$.value=$.value.filter(t=>(t.update(k.value),f.value.drawRect(t.x1,t.y1,t.size),!t.isStopped))},ke=()=>{b.value=b.value.filter(t=>{t.update();const n=ne.getLifeLetters(x.value);return n.length?be(t,n):X(!0),f.value.drawRing({x:t.x1,y:t.y1,size:t.size,color:"#fc0"}),!t.isStopped})},Me=()=>{for(const t in S.value){const n=S.value[t];n.size+=.5,n.thick-=.2,f.value.drawRing({x:n.x,y:n.y,size:n.size,color:!1,thick:n.thick,borderColor:"#fff"}),n.thick<n.endThick&&ge(t)}},be=(t,n)=>{n.forEach((h,G)=>{t.y1<h.y1&&(t.x1<h.x1&&h.x1<t.x2||t.x1<h.x2&&h.x2<t.x2||h.x1<t.x1&&t.x2<h.x2)&&(xe(h),G%2===0&&ve(new Oe(h.x1,h.y1)),G%4===0&&Ce(h),c.replay())})},Ce=t=>{for(let n=0;n<10;n++)pe(new Ve({x:t.x1,y:t.y1}))},Re=(t,n)=>{t.y1<n.y&&t.x1<n.x&&n.x<t.x2&&(n.setInactive(),e("canvas-letters-damage"))},Fe=()=>{f.value=new qe("#canvas"),Se(),Le(),te()};return j(()=>{C.value=window.innerWidth,I.value=window.innerHeight,c=new N(je,.3),Fe()}),q(()=>{clearInterval(r),c.destroy()}),(t,n)=>{const h=We;return _(),g("div",Ze,[o("div",et,[(_(!0),g(Ue,null,Ye(p(x),G=>(_(),ce(h,{key:G.id,"is-show":G.isShow,"is-killed":G.isKilled,sign:G.sign,"onLetterTag-Show":we},null,8,["is-show","is-killed","sign"]))),128))]),o("canvas",{id:"canvas",width:p(C),height:p(I)},null,8,tt),p(u)?(_(),g("div",st,[o("div",null,"hasElementsInAnimation: "+y(p(Y)),1),o("div",null,"seeds: "+y(p($).length)+" | bullets: "+y(p(b).length),1),o("div",null,"circles: "+y(p(F))+" | meteors: "+y(p(z)),1)])):le("",!0)])}}};const it={name:"UIButton",props:{text:{type:String,default:"Button"},disabled:{type:Boolean,default:!1}},data(){return{}},computed:{},methods:{}},nt={class:"ui-button"};function ot(s,e,a,i,c,r){return _(),g("div",nt,y(a.text),1)}const Z=B(it,[["render",ot]]);const rt={name:"ButtonPlay",components:{UIButton:Z},props:{},data(){return{barrier:{},texts:{default:"Destroy this text",wait:"Wait for falling ...",again:"Close"}}},computed:{...J("game",["isSeedsFall","isGameReady","isGameFinished"]),text(){return this.isGameFinished?this.texts.again:this.isSeedsFall?this.texts.wait:this.texts.default},disabled(){return this.isSeedsFall},stiles(){return{disabled:this.disabled,hide:this.isGameReady&&!this.isGameFinished}}},methods:{...Q("game",["setIsGameReady","setBarrier"]),handleClick(){if(!this.isSeedsFall){if(this.isGameFinished){this.$emit("button-play--restart",this.barrier);return}setTimeout(()=>{this.setIsGameReady(!0)})}},createBarrier(){const s=this.$el.getBoundingClientRect();this.barrier={x1:s.left,x2:s.left+s.width,y1:s.top}}},mounted(){this.createBarrier(),this.setBarrier(this.barrier)}},ct=["disabled"];function lt(s,e,a,i,c,r){const l=Z;return _(),g("div",{class:U(["button-play",r.stiles]),disabled:r.disabled,onClick:e[0]||(e[0]=(...u)=>r.handleClick&&r.handleClick(...u))},[L(l,{text:r.text},null,8,["text"])],10,ct)}const dt=B(rt,[["render",lt]]);const ut={name:"UILoaderLine",props:{percent:{type:Number,default:50}},data(){return{}},computed:{width(){return`${this.percent}%`}}},ht={class:"ui-loader-line"};function mt(s,e,a,i,c,r){return _(),g("div",ht,[o("div",{class:"loader",style:de({width:r.width})},null,4)])}const me=B(ut,[["render",mt]]);const _t={name:"IconTime"},vt={class:"icon-time",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},pt=o("path",{d:"M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448 c0,10.19-8.259,18.447-18.447,18.447c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699 c8.336,0,15.094-6.758,15.094-15.094S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448c0,10.19-8.259,18.447-18.447,18.447 c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699c8.336,0,15.094-6.758,15.094-15.094 S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444 l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z",fill:"#6a6a6a"},null,-1),gt=[pt];function ft(s,e,a,i,c,r){return _(),g("svg",vt,gt)}const yt=B(_t,[["render",ft]]);const xt={name:"IconShield"},St=s=>(He("data-v-4739967d"),s=s(),Pe(),s),Lt={class:"icon-shield",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},wt=St(()=>o("path",{d:"M41.575,12.596c-3.887-1.112-6.776-2.975-9.326-4.616C29.669,6.317,27.442,4.882,25,4.882 c-2.441,0-4.668,1.435-7.248,3.094c-2.549,1.645-5.438,3.507-9.325,4.619l-1.324,0.378v1.376c0,0.691,0.033,5.652,0.086,6.479 c0.109,1.667,0.339,3.317,0.684,4.905c3.292,15.173,15.951,20.082,16.488,20.282L25,46.256l0.642-0.24 c0.536-0.2,13.193-5.105,16.486-20.282c0.345-1.588,0.575-3.237,0.684-4.905c0.055-0.825,0.086-5.787,0.086-6.479v-1.376 L41.575,12.596z M25,44.308V25.345H9.658C9.343,23.9,9.119,22.358,9.012,20.71c-0.049-0.75-0.084-5.567-0.084-6.36 C16.964,12.051,21.067,6.709,25,6.709V20.71v4.635h15.346C37.226,39.73,25,44.308,25,44.308z",fill:"#6a6a6a"},null,-1)),$t=[wt];function Gt(s,e,a,i,c,r){return _(),g("svg",Lt,$t)}const It=B(xt,[["render",Gt],["__scopeId","data-v-4739967d"]]);const oe=100;let re;const Bt={name:"StatusBar",components:{UI_Loader_line:me,UILink2Move:ue,IconTime:yt,IconShield:It},data(){return{health:oe,isDebug:!1}},watch:{isGameStart(){this.runTimer()},damage(s){this.health=oe-s},health(s){s<=0&&this.setIsGameFinished(!0)}},computed:{...J("game",["isGameReady","isGameStart","isGameFinished","score","shots","letters","killedLetters","damage","timeLeft"])},methods:{...Q("game",["setIsGameFinished","setIsLeaderBoardOpened","setScore","decreaseTimeLeft"]),runTimer(){re=setInterval(()=>{this.decreaseTimeLeft(),(this.timeLeft<=0||this.isGameFinished)&&(this.setIsGameFinished(!0),clearInterval(re))},1e3)},openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},kt={class:"status-bar--top"},Mt={class:"score"},bt={class:"status-bar--right"},Ct={class:"time"};function Rt(s,e,a,i,c,r){const l=K("IconTime"),u=K("IconShield"),w=me,x=ue;return _(),g("div",{class:U(["status-bar",{active:s.isGameReady||c.isDebug}])},[o("div",kt,[o("div",Mt,y(s.killedLetters.length)+" killed",1),o("div",bt,[L(l),L(u),o("div",Ct,y(s.timeLeft)+"s",1)])]),L(w,{class:"loader-Line",percent:c.health},null,8,["percent"]),L(x,{class:"leaders",text:"leaderboard",onClick:r.openLeaderBoard},null,8,["onClick"])],2)}const Ft=B(Bt,[["render",Rt]]),zt=""+new URL("damage.f1e615a0.mp3",import.meta.url).href;const Dt={__name:"RobotShooter",props:{position:{type:Object,default:{}}},setup(s,{expose:e}){const a=s,i=W();let c;const r=m(!1),l=m(null),u=d(()=>i.getters["game/isGameReady"]),w=d(()=>i.getters["game/isGameFinished"]),x=d(()=>i.getters["game/damage"]),k=d(()=>({left:a.position.x1+"px"})),S=d(()=>({active:u.value&&!w.value,damage:r.value})),M=()=>{r.value=!0,setTimeout(()=>{r.value=!1},300)};return T(()=>x.value,()=>{M(),c.replay()}),j(()=>{c=new N(zt,.3)}),q(()=>{c.destroy()}),e({shooter:l}),(F,z)=>(_(),g("div",{ref_key:"shooter",ref:l,class:U(["robot-shooter",p(S)]),style:de(p(k))},null,6))}};const Tt={},Ut={class:"ui-dashed-list"};function Yt(s,e){return _(),g("div",Ut,[Ae(s.$slots,"default")])}const Ht=B(Tt,[["render",Yt]]);const Pt={name:"ScoreBoard",components:{UIButton:Z,DashedList:Ht},data(){return{isDebug:!1}},watch:{score(s){this.setScore(s)}},computed:{...J("game",["isGameFinished","timeLeft","damage","shots","letters","killedLetters","aliveLetters","score"]),score(){if(this.aliveLetters.length,!this.killedLetters.length)return 0;const s=Math.ceil(this.killedLetters.length*1e4/(this.aliveLetters.length+this.shots)),e=this.timeLeft*10-this.damage*5;return s+e}},methods:{...Q("game",["setScore","setIsLeaderBoardOpened"]),openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},At=o("div",{class:"hooray"},"Hooray!",-1),Et={class:"result"},Nt=o("div",null,"Time left",-1),Ot={class:"result"},Vt=o("div",null,"Shots",-1),Xt={class:"result"},Kt=o("div",null,"Goals",-1),Wt={class:"result"},jt=o("div",null,"Life",-1),qt={class:"result best"},Jt=o("div",null,"Your best score",-1);function Qt(s,e,a,i,c,r){const l=K("DashedList");return _(),g("div",{class:U(["score-board",{active:s.isGameFinished||c.isDebug}])},[o("h3",null,y(r.score)+" points",1),At,L(l,null,{default:he(()=>[o("div",Et,[Nt,o("div",null,y(s.timeLeft),1)]),o("div",Ot,[Vt,o("div",null,y(s.shots),1)]),o("div",Xt,[Kt,o("div",null,y(s.killedLetters.length),1)]),o("div",Wt,[jt,o("div",null,y(100-s.damage),1)]),o("div",qt,[Jt,o("div",null,y(r.score),1)])]),_:1})],2)}const Zt=B(Pt,[["render",Qt]]),es=""+new URL("shoot.6b00b3bd.mp3",import.meta.url).href,ts=""+new URL("backgroundGame.c17ea688.mp3",import.meta.url).href;const ss={__name:"MainGame",setup(s){const e=W();let a,i;const c=m({}),r=m(0),l=m(null),u=d(()=>e.getters["game/isGameFinished"]),w=d(()=>e.getters["game/isGameReady"]),x=d(()=>e.getters["app/isPageAnimationFinished"]),k=f=>e.commit("game/setIsGameStart",f),S=()=>e.commit("game/resetStateGame"),M=()=>e.commit("game/increaseShoots"),F=()=>e.commit("game/increaseDamage"),z=()=>e.commit("leaderBoard/resetStateLeaderBoard"),Y=()=>{r.value+=1},$=()=>{z(),S(),Y(),i.destroy(),a.destroy()},b=()=>{!w.value||u.value||(k(!0),M(),a.replay())},O=f=>{var I;if(!((I=l==null?void 0:l.value)!=null&&I.shooter))return;const C=l.value.shooter;c.value={x1:f.clientX,y1:C.getBoundingClientRect().top,x2:f.clientX+C.offsetWidth}},H=()=>{let f;window.addEventListener("resize",()=>{clearTimeout(f),f=setTimeout(()=>{$()},300)})};return j(()=>{a=new N(es,.3),i=new N(ts,.5,!0),H()}),q(()=>{$()}),T(()=>w.value,()=>{i.replay()}),T(()=>u.value,()=>{i.pause()}),(f,C)=>{const I=at,P=dt,V=Ft,A=Dt,X=Zt;return _(),g("div",{key:p(r),class:"main-game",onClick:b,onMousemove:O},[L(I,{shooter:p(c),onCanvasLettersDamage:F},null,8,["shooter"]),L(Ee,null,{default:he(()=>[p(x)?(_(),ce(P,{key:0,"onButtonPlay-Restart":$})):le("",!0)]),_:1}),L(V),L(A,{ref_key:"shooter",ref:l,position:p(c)},null,8,["position"]),L(X)],32)}}},as={class:"page-game"},is=o("div",{class:"stars-box"},[o("div",{id:"stars"}),o("div",{id:"stars2"}),o("div",{id:"stars3"})],-1),ls=Ne({__name:"index",setup(s){return Xe({title:"Hi! Nice to meet you =)"}),(e,a)=>{const i=ss;return _(),g("div",as,[L(i),is])}}});export{ls as default};
