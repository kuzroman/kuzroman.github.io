var Te=Object.defineProperty;var ze=(i,e,t)=>e in i?Te(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var g=(i,e,t)=>(ze(i,typeof e!="symbol"?e+"":e,t),t),se=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var N=(i,e,t)=>(se(i,e,"read from private field"),t?t.call(i):e.get(i)),ie=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},oe=(i,e,t,o)=>(se(i,e,"write to private field"),o?o.call(i,t):e.set(i,t),t);import{r as S,C as De,k as u,E as T,o as d,a as v,t as p,O as Y,u as _,P,j as q,x as Q,l as J,e as n,F as Ue,b as Pe,c as A,m as $,Q as Z,N as ee,s as R,h as b,w as re,p as Ae,q as Ye,R as ce,S as j,v as He,z as le,T as Ee,f as Ne}from"./entry.0afbd267.js";import{C as Ve,M as Xe}from"./Meteor.8baf1c78.js";import{_ as de}from"./Button.554927f5.js";import{u as Oe}from"./composables.20faf433.js";const Ke={key:1},We={__name:"LetterTag",props:{sign:{type:String,default:" "},isKilled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1}},emits:["letter-tag--show"],setup(i,{emit:e}){const t=i,o=S(null),c=S(null),r=S(null),l=S(null),h=S(null),L=S(De().vnode.key),f=u(()=>[{show:t.isShow},{hide:t.isKilled}]),B=()=>{if(!o.value)return;const y=o.value.getBoundingClientRect();c.value=Math.ceil(y.left),l.value=Math.ceil(y.top),r.value=Math.ceil(y.left+o.value.clientWidth),h.value=Math.ceil(y.top+o.value.clientHeight)};return T(()=>t.isShow,()=>{B(),!(!c.value||!l.value)&&e("letter-tag--show",{x1:c.value,x2:r.value,y1:l.value,y2:h.value,id:L.value})}),(y,M)=>i.sign!=="|"?(d(),v("div",{key:0,ref_key:"letterEl",ref:o,class:Y(["letter-tag",_(f)])},p(i.sign),3)):(d(),v("br",Ke))}};class V{constructor(e,t=1,o=!1){this.audio=new Audio(e),this.audio.volume=t,this.audio.loop=o}isPlaying(){return this.audio.duration>0&&!this.audio.paused}play(e=()=>{}){this.audio.play().then(t=>e(t))}pause(){this.audio.pause()}replay(){this.audio.currentTime=0,this.play()}destroy(){this.audio.remove()}}const je=""+new URL("explode.1718f901.mp3",import.meta.url).href;var F;class qe{constructor(e){ie(this,F,void 0);g(this,"ctx");oe(this,F,document.querySelector(e)),this.ctx=N(this,F).getContext("2d")}drawRect(e,t,o,c){this.ctx.fillStyle=c||"#fff",this.ctx.fillRect(e,t,o,o)}drawRing(e){const{x:t,y:o,size:c,color:r,thick:l,borderColor:h}=e;this.ctx.beginPath(),this.ctx.arc(t,o,c,0,2*Math.PI),r&&(this.ctx.fillStyle=r,this.ctx.fill()),l&&(this.ctx.lineWidth=l),h&&(this.ctx.strokeStyle=h,this.ctx.stroke())}clearCanvas(e=N(this.ctx,F).width,t=N(this.ctx,F).height){this.ctx.clearRect(0,0,e,t)}}F=new WeakMap;class Qe{constructor(e,t,o="default"){g(this,"ground",document.body.offsetHeight);g(this,"gravityX",P(1,5));g(this,"gravityY",P(1,5));g(this,"speed",P(2,5)/10);g(this,"bounceNum",0);g(this,"maxBounceNum",5);g(this,"revert",!1);this.x1=e||0,this.y1=t||0,this.size=P(1,3),this.isStopped=!1,this.direction=Math.random()<.6?1:-1,this.type=o}update(e){this.type==="shrapnel"?this._updateShrapnel():this._updateSeed(e)}_updateSeed(e){if(this._isBarrier(e)&&(this.revert=!0,this.bounceNum+=1),this.gravityY<0&&(this.revert=!1),this._isBounceLimitReached()||this._isUnderGround()){this.isStopped=!0;return}this._move()}_updateShrapnel(){if(this._isUnderGround()){this.isStopped=!0;return}this._fallDown(this.direction,!0)}_isBounceLimitReached(){return this.maxBounceNum<this.bounceNum}_isUnderGround(){return this.ground<this.y1}_isBarrier(e){return e?this.y1>=e.y1&&e.x1<this.x1&&this.x1<e.x2:!1}_move(){this.revert?this._fallUp():this._fallDown()}_fallDown(e,t){this._moveX(e,t),this.y1+=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY+this.speed)*100)/100}_fallUp(e){this._moveX(e),this.y1-=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY-1)*100)/100}_moveX(e=1,t=!1){const o=t?P(2,8):7;this.x1+=e*Math.round(this.gravityX/o),this.gravityX=Math.round((this.gravityX+this.speed)*100)/100}}class Je{constructor(e,t){g(this,"gravityY",10);g(this,"ground",-20);this.x1=e,this.x2=e+6,this.y1=t,this.size=6}}class Ze{constructor(e,t){g(this,"isShow",!1);g(this,"x1",0);g(this,"x2",0);g(this,"y1",0);g(this,"y2",0);const o=e===" "||e==="|";this.id=t,this.sign=e===" "?"-":e,this.isKilled=o,this.isService=o}static getLifeLetters(e){return e.filter(t=>!t.isKilled)}}const et={class:"canvas-letters"},tt={id:"lettersEl",class:"letters"},st=["width","height"],it={key:0,style:{position:"absolute",top:"0",left:"50%"}},ot={__name:"CanvasAnimation",props:{shooter:{type:Object,default:()=>{}}},setup(i){const e=i,t=q();let o,c;const r=u(()=>t.getters["game/isDebug"]),l=u(()=>t.getters["game/shots"]),h=u(()=>t.getters["game/letters"]),L=u(()=>t.getters["game/barrier"]),f=u(()=>t.getters["game/circles"]),B=u(()=>t.getters["game/meteors"]),y=u(()=>t.getters["game/bullets"]),M=u(()=>t.getters["game/circlesLength"]),z=u(()=>t.getters["game/meteorsLength"]),D=u(()=>t.getters["game/bulletLength"]),U=u(()=>w.value.length>0||D.value>0||M.value>0||z.value>0),w=S([]),X=3,O=r.value?0:16;let k,x=0,C=0;const G="Hello, my name is Roman.|I am a Front-End developer with 12 years old experience.|SPA, SSR, SSG, js and Vue ... are my passion.|Check this out some projects on my Work page.|Feel free if you wanna say hello at kuzroman@list.ru then do it!)",H=s=>t.commit("game/setIsSeedsFalling",s),K=s=>t.commit("game/setIsGameFinished",s),W=s=>t.commit("game/setLetters",s),E=s=>t.commit("game/updateLetters",s),he=s=>t.commit("game/addCircle",s),me=s=>t.commit("game/addMeteor",s),_e=s=>t.commit("game/addBullet",s),ve=s=>t.commit("game/removeCircle",s),pe=s=>t.commit("game/removeMeteors",s),ge=s=>t.commit("game/removeBullet",s),fe=s=>t.commit("game/showLetter",s),ye=s=>t.commit("game/killLetter",s),xe=s=>t.commit("game/increaseDamage",s);T(()=>l.value,()=>{_e(new Je(e.shooter.x1,e.shooter.y1))}),T(()=>U.value,s=>{s&&te()});const Se=()=>{const s=Array.from(G,(a,m)=>new Ze(a,m));W(s)},Le=s=>{const a=h.value[s.id];E({...a,...s}),we(s)},we=(s,a)=>{for(let m=0;m<X;m++){const I=new Qe(s.x1,s.y1,a);w.value.push(I)}},be=s=>{if(G.length-1<s)return;const a=h.value[s];fe(a),E(a)},te=()=>{H(!0);let s=0;clearInterval(c),c=setInterval(()=>{k.clearCanvas(x,C),be(s++),Ge(),Ie(),$e(),ke(),U.value||(clearInterval(c),H(!1))},O)};function Be(s){s.updatePosition(),s.updateMeteorSize(),k.drawRing({x:s.x,y:s.y,size:s.size,color:"#fc0"})}const ke=()=>{for(const s in B.value){const a=B.value[s];Be(a),Fe(e.shooter,a),(a.size<.1||a.isInactive)&&pe(s)}},Ge=()=>{w.value=w.value.filter(s=>(s.update(L.value),k.drawRect(s.x1,s.y1,s.size),!s.isStopped))},Ie=()=>{for(const s in y.value){const a=y.value[s];if(a.y1-=a.gravityY,k.drawRing({x:a.x1,y:a.y1,size:a.size,color:"#4cb977"}),a.y1<a.ground){ge(s);continue}h.value.length?Me(a,h.value):K(!0)}},$e=()=>{for(const s in f.value){const a=f.value[s];a.size+=.5,a.thick-=.2,k.drawRing({x:a.x,y:a.y,size:a.size,color:!1,thick:a.thick,borderColor:"#fff"}),a.thick<a.endThick&&ve(s)}},Me=(s,a)=>{a.forEach((m,I)=>{!m.isKilled&&s.y1<m.y1&&(s.x1<m.x1&&m.x1<s.x2||s.x1<m.x2&&m.x2<s.x2||m.x1<s.x1&&s.x2<m.x2)&&(ye(m),I%2===0&&he(new Ve(m.x1,m.y1)),Ce(m),o.replay())})},Ce=s=>{for(let a=0;a<3;a++)me(new Xe({x:s.x1,y:s.y1}))},Fe=(s,a)=>{s.y1<a.y&&s.x1<a.x&&a.x<s.x2&&(a.setInactive(),xe(a))},Re=()=>{k=new qe("#canvas"),Se(),te()};return Q(()=>{x=window.innerWidth,C=window.innerHeight,o=new V(je,.3),Re()}),J(()=>{clearInterval(c),o.destroy()}),(s,a)=>{const m=We;return d(),v("div",et,[n("div",tt,[(d(!0),v(Ue,null,Pe(_(h),I=>(d(),A(m,{key:I.id,"is-show":I.isShow,"is-killed":I.isKilled,sign:I.sign,"onLetterTag-Show":Le},null,8,["is-show","is-killed","sign"]))),128))]),n("canvas",{id:"canvas",width:_(x),height:_(C)},null,8,st),_(r)?(d(),v("div",it,[n("div",null,"hasElementsInAnimation: "+p(_(U)),1),n("div",null,"seeds: "+p(_(w).length)+" | bullets: "+p(_(D)),1),n("div",null,"circles: "+p(_(M))+" | meteors: "+p(_(z)),1),n("div",null,"text "+p(G.length),1)])):$("",!0)])}}};const at={name:"ButtonPlay",components:{UIButton:de},props:{},data(){return{barrier:{},texts:{default:"Destroy this text",wait:"Wait for falling ...",again:"Close"}}},computed:{...Z("game",["isSeedsFalling","isGameReady","isGameFinished"]),text(){return this.isGameFinished?this.texts.again:this.isSeedsFalling?this.texts.wait:this.texts.default},stiles(){return{disabled:this.isSeedsFalling,hide:this.isGameReady&&!this.isGameFinished}}},mounted(){this.createBarrier(),this.setBarrier(this.barrier)},methods:{...ee("game",["setIsGameReady","setBarrier"]),handleClick(){if(!this.isSeedsFalling){if(this.isGameFinished){this.$emit("button-play--restart",this.barrier);return}setTimeout(()=>{this.setIsGameReady(!0)})}},createBarrier(){const i=this.$el.getBoundingClientRect();this.barrier={x1:i.left,x2:i.left+i.width,y1:i.top}}}},nt=["disabled"];function rt(i,e,t,o,c,r){const l=de;return d(),v("div",{class:Y(["button-play",r.stiles]),disabled:i.isSeedsFalling,onClick:e[0]||(e[0]=(...h)=>r.handleClick&&r.handleClick(...h))},[b(l,{text:r.text,disabled:i.isSeedsFalling},null,8,["text","disabled"])],10,nt)}const ct=R(at,[["render",rt]]);const lt={name:"UILoaderLine",props:{percent:{type:Number,default:50}},data(){return{}},computed:{width(){return`${this.percent}%`}}},dt={class:"ui-loader-line"};function ut(i,e,t,o,c,r){return d(),v("div",dt,[n("div",{class:"loader",style:re({width:r.width})},null,4)])}const ue=R(lt,[["render",ut]]);const ht={name:"IconTime"},mt={class:"icon-time",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},_t=n("path",{d:"M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448 c0,10.19-8.259,18.447-18.447,18.447c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699 c8.336,0,15.094-6.758,15.094-15.094S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448c0,10.19-8.259,18.447-18.447,18.447 c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699c8.336,0,15.094-6.758,15.094-15.094 S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444 l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z",fill:"#6a6a6a"},null,-1),vt=[_t];function pt(i,e,t,o,c,r){return d(),v("svg",mt,vt)}const gt=R(ht,[["render",pt]]);const ft={name:"IconShield"},yt=i=>(Ae("data-v-4739967d"),i=i(),Ye(),i),xt={class:"icon-shield",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},St=yt(()=>n("path",{d:"M41.575,12.596c-3.887-1.112-6.776-2.975-9.326-4.616C29.669,6.317,27.442,4.882,25,4.882 c-2.441,0-4.668,1.435-7.248,3.094c-2.549,1.645-5.438,3.507-9.325,4.619l-1.324,0.378v1.376c0,0.691,0.033,5.652,0.086,6.479 c0.109,1.667,0.339,3.317,0.684,4.905c3.292,15.173,15.951,20.082,16.488,20.282L25,46.256l0.642-0.24 c0.536-0.2,13.193-5.105,16.486-20.282c0.345-1.588,0.575-3.237,0.684-4.905c0.055-0.825,0.086-5.787,0.086-6.479v-1.376 L41.575,12.596z M25,44.308V25.345H9.658C9.343,23.9,9.119,22.358,9.012,20.71c-0.049-0.75-0.084-5.567-0.084-6.36 C16.964,12.051,21.067,6.709,25,6.709V20.71v4.635h15.346C37.226,39.73,25,44.308,25,44.308z",fill:"#6a6a6a"},null,-1)),Lt=[St];function wt(i,e,t,o,c,r){return d(),v("svg",xt,Lt)}const bt=R(ft,[["render",wt],["__scopeId","data-v-4739967d"]]);const ae=100;let ne;const Bt={name:"StatusBar",components:{UI_Loader_line:ue,UILink2Move:ce,IconTime:gt,IconShield:bt},data(){return{health:ae,isDebug:!1}},watch:{isGameStart(){this.runTimer()},damage(i){this.health=ae-i},health(i){i<=0&&this.setIsGameFinished(!0)}},computed:{...Z("game",["isGameReady","isGameStart","isGameFinished","score","shots","letters","killedLetters","damage","timeLeft"])},methods:{...ee("game",["setIsGameFinished","setIsLeaderBoardOpened","setScore","decreaseTimeLeft"]),runTimer(){ne=setInterval(()=>{this.decreaseTimeLeft(),(this.timeLeft<=0||this.isGameFinished)&&(this.setIsGameFinished(!0),clearInterval(ne))},1e3)},openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},kt={class:"status-bar--top"},Gt={class:"score"},It={class:"status-bar--right"},$t={class:"time"};function Mt(i,e,t,o,c,r){const l=j("IconTime"),h=j("IconShield"),L=ue,f=ce;return d(),v("div",{class:Y(["status-bar",{active:i.isGameReady||c.isDebug}])},[n("div",kt,[n("div",Gt,p(i.killedLetters.length)+" killed",1),n("div",It,[b(l),b(h),n("div",$t,p(i.timeLeft)+"s",1)])]),b(L,{class:"loader-Line",percent:c.health},null,8,["percent"]),b(f,{class:"leaders",text:"leaderboard",onClick:r.openLeaderBoard},null,8,["onClick"])],2)}const Ct=R(Bt,[["render",Mt]]),Ft=""+new URL("damage.f1e615a0.mp3",import.meta.url).href;const Rt={__name:"RobotShooter",props:{position:{type:Object,default:{}}},setup(i,{expose:e}){const t=i,o=q();let c;const r=S(!1),l=S(null),h=u(()=>o.getters["game/isGameReady"]),L=u(()=>o.getters["game/isGameFinished"]),f=u(()=>o.getters["game/damage"]),B=u(()=>({left:t.position.x1+"px"})),y=u(()=>({active:h.value&&!L.value,damage:r.value})),M=()=>{r.value=!0,setTimeout(()=>{r.value=!1},300)};return T(()=>f.value,()=>{M(),c.replay()}),Q(()=>{c=new V(Ft,.3)}),J(()=>{c.destroy()}),e({shooter:l}),(z,D)=>(d(),v("div",{ref_key:"shooter",ref:l,class:Y(["robot-shooter",_(y)]),style:re(_(B))},null,6))}};const Tt={},zt={class:"ui-dashed-list"};function Dt(i,e){return d(),v("div",zt,[He(i.$slots,"default")])}const Ut=R(Tt,[["render",Dt]]);const Pt={name:"ScoreBoard",components:{DashedList:Ut},data(){return{isDebug:!1}},computed:{...Z("game",["isGameFinished","timeLeft","damage","shots","letters","killedLetters","aliveLetters","score"]),score(){if(this.aliveLetters.length,!this.killedLetters.length)return 0;const i=Math.ceil(this.killedLetters.length*1e4/(this.aliveLetters.length+this.shots));return Math.floor(i+this.bonusForLife+this.bonusForTime)},bonusForTime(){return Math.floor(this.timeLeft*200)},bonusForLife(){return Math.floor((100-this.damage)*50)},isCurrentScoreBest(){return this.bestScoreFromLocalStorage<this.score},bestScoreFromLocalStorage(){return+this.getBestScoreFromLocalStorage()},bestScore(){return this.isCurrentScoreBest?this.score:this.bestScoreFromLocalStorage}},watch:{score(i){this.setScore(i),this.setBestScoreToLocalStore(i)}},methods:{...ee("game",["setScore","setIsLeaderBoardOpened"]),openLeaderBoard(){this.setIsLeaderBoardOpened(!0)},getBestScoreFromLocalStorage(){return localStorage.getItem("bestScore")},setBestScoreToLocalStore(i){this.isCurrentScoreBest&&localStorage.setItem("bestScore",i)}}},At={class:"score"},Yt={class:"hooray"},Ht=n("div",null,"Hooray!",-1),Et={key:0,class:"mt-4"},Nt={class:"result"},Vt=n("div",null,"Time left",-1),Xt={class:"result"},Ot=n("div",null,"Shots",-1),Kt={class:"result"},Wt=n("div",null,"Goals",-1),jt={class:"result"},qt=n("div",null,"Life",-1),Qt={key:0,class:"result bonus"},Jt=n("div",null,"Bonus for survival 🎉",-1),Zt={key:1,class:"result bonus"},es=n("div",null,"Bonus for speed 🎉",-1),ts={class:"result best"},ss=n("div",null,"Your best score",-1);function is(i,e,t,o,c,r){const l=j("DashedList");return d(),v("div",{class:Y(["score-board",{active:i.isGameFinished||c.isDebug}])},[n("h3",At,p(r.score)+" points",1),n("div",Yt,[Ht,r.isCurrentScoreBest?(d(),v("div",Et," You've just beaten your own highscore 🎉🎉🎉 ")):$("",!0)]),b(l,null,{default:le(()=>[n("div",Nt,[Vt,n("div",null,p(i.timeLeft),1)]),n("div",Xt,[Ot,n("div",null,p(i.shots),1)]),n("div",Kt,[Wt,n("div",null,p(i.killedLetters.length),1)]),n("div",jt,[qt,n("div",null,p(100-i.damage),1)]),r.bonusForLife?(d(),v("div",Qt,[Jt,n("div",null,p(r.bonusForLife),1)])):$("",!0),r.bonusForTime?(d(),v("div",Zt,[es,n("div",null,p(r.bonusForTime),1)])):$("",!0),n("div",ts,[ss,n("div",null,p(r.bestScore),1)])]),_:1})],2)}const os=R(Pt,[["render",is]]),as=""+new URL("shoot.6b00b3bd.mp3",import.meta.url).href,ns=""+new URL("backgroundGame.c17ea688.mp3",import.meta.url).href;const rs={__name:"MainGame",setup(i){const e=q();let t,o;const c=S({}),r=S(0),l=S(null),h=u(()=>e.getters["game/isGameStart"]),L=u(()=>e.getters["game/isGameFinished"]),f=u(()=>e.getters["game/isGameReady"]),B=u(()=>e.getters["app/isPageAnimationFinished"]),y=x=>e.commit("game/setIsGameStart",x),M=()=>e.commit("game/resetStateGame"),z=()=>e.commit("game/increaseShoots"),D=()=>e.commit("leaderBoard/resetStateLeaderBoard"),U=()=>{r.value+=1},w=()=>{D(),M(),U(),o.pause(),t.pause()},X=()=>{!f.value||L.value||(h.value||y(!0),z(),t.replay())},O=x=>{var G;if(!((G=l==null?void 0:l.value)!=null&&G.shooter))return;const C=l.value.shooter;c.value={x1:x.clientX,y1:C.getBoundingClientRect().top,x2:x.clientX+C.offsetWidth}},k=()=>{let x;window.addEventListener("resize",()=>{clearTimeout(x),x=setTimeout(()=>{w()},300)})};return Q(()=>{t=new V(as,.3),o=new V(ns,.5,!0),k()}),J(()=>{w()}),T(()=>f.value,()=>{o.replay()}),T(()=>L.value,()=>{o.pause()}),(x,C)=>{const G=ot,H=ct,K=Ct,W=Rt,E=os;return d(),v("div",{key:_(r),class:"main-game",onClick:X,onMousemove:O},[b(G,{shooter:_(c)},null,8,["shooter"]),b(Ee,null,{default:le(()=>[_(B)?(d(),A(H,{key:0,"onButtonPlay-Restart":w})):$("",!0)]),_:1}),_(f)?(d(),A(K,{key:0})):$("",!0),_(f)?(d(),A(W,{key:1,ref_key:"shooter",ref:l,position:_(c)},null,8,["position"])):$("",!0),_(L)?(d(),A(E,{key:2})):$("",!0)],32)}}},cs={class:"page-game"},ls=n("div",{class:"stars-box"},[n("div",{id:"stars"}),n("div",{id:"stars2"}),n("div",{id:"stars3"})],-1),vs=Ne({__name:"index",setup(i){return Oe({title:"Hi! Nice to meet you =)"}),(e,t)=>{const o=rs;return d(),v("div",cs,[b(o),ls])}}});export{vs as default};
