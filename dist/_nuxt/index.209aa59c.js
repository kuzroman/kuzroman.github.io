var Be=Object.defineProperty;var Ge=(t,e,a)=>e in t?Be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var m=(t,e,a)=>(Ge(t,typeof e!="symbol"?e+"":e,a),a),ne=(t,e,a)=>{if(!e.has(t))throw TypeError("Cannot "+a)};var Y=(t,e,a)=>(ne(t,e,"read from private field"),a?a.call(t):e.get(t)),oe=(t,e,a)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,a)},re=(t,e,a,i)=>(ne(t,e,"write to private field"),i?i.call(t,a):e.set(t,a),a);import{r as u,l as Ie,q as f,w as z,o as h,a as p,t as x,K as U,u as g,m as ke,e as o,L as T,v as J,x as Q,p as Z,F as Ce,b as Me,c as j,z as ue,C as G,M as ee,J as te,h as S,E as he,A as Re,B as De,N as _e,O as q,D as Fe,H as me,T as Te,f as ze}from"./entry.10ca6f54.js";import{C as Ue}from"./Circle.2841af17.js";import{u as Pe}from"./composables.0e8e199f.js";const He={key:1},Ye={__name:"LetterTag",props:{sign:{type:String,default:" "},isKilled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1}},emits:["letter-tag--show"],setup(t,{emit:e}){const a=t,i=u(null),r=u(null),n=u(null),l=u(null),d=u(null),v=u(Ie().vnode.key),L=f(()=>[{show:a.isShow},{hide:a.isKilled}]),b=()=>{if(!i.value)return;const y=i.value.getBoundingClientRect();r.value=Math.ceil(y.left),l.value=Math.ceil(y.top),n.value=Math.ceil(y.left+i.value.clientWidth),d.value=Math.ceil(y.top+i.value.clientHeight)};return z(()=>a.isShow,()=>{b(),!(!r.value||!l.value)&&e("letter-tag--show",{x1:r.value,x2:n.value,y1:l.value,y2:d.value,id:v.value})}),(y,w)=>t.sign!=="|"?(h(),p("div",{key:0,ref_key:"letterEl",ref:i,class:U(["letter-tag",g(L)])},x(t.sign),3)):(h(),p("br",He))}};const Ae={class:"debug-input"},Ne={class:"left"},Oe={class:"right"},Ee={__name:"DebugInput",props:{isDebug:{type:Boolean,default:!1},seeds:{type:Array,default:[]},bullets:{type:Array,default:[]},letters:{type:Array,default:[]},shooter:{type:Object,default:{}}},emits:["debug-input--pause"],setup(t,{emit:e}){const a=t,i=u(!1),r=n=>{const l=n||"Space";document.body.addEventListener("keydown",d=>{d.code===l&&(i.value=!i.value,e("debug-input--pause",i.value))}),document.body.focus()};return ke(()=>{a.isDebug&&r("Space")}),(n,l)=>(h(),p("div",Ae,[o("pre",Ne,x([...t.seeds,...t.bullets]),1),o("pre",Oe,x(t.letters),1)]))}};class A{constructor(e,a=1,i=!1){this.audio=new Audio(e),this.audio.volume=a,this.audio.loop=i}isPlaying(){return this.audio.duration>0&&!this.audio.paused}play(e=()=>{}){this.audio.play().then(a=>e(a))}pause(){this.audio.pause()}replay(){this.audio.currentTime=0,this.play()}destroy(){this.audio.remove()}}const Ve=""+new URL("explode.1718f901.mp3",import.meta.url).href;var k;class Xe{constructor(e){oe(this,k,void 0);m(this,"ctx");re(this,k,document.querySelector(e)),this.ctx=Y(this,k).getContext("2d")}drawRect(e,a,i,r){this.ctx.fillStyle=r||"#fff",this.ctx.fillRect(e,a,i,i)}drawRing(e,a,i,r,n,l){this.ctx.beginPath(),this.ctx.arc(e,a,i,0,2*Math.PI),r&&(this.ctx.fillStyle=r,this.ctx.fill()),n&&(this.ctx.lineWidth=n),l&&(this.ctx.strokeStyle=l,this.ctx.stroke())}clearCanvas(e=Y(this.ctx,k).width,a=Y(this.ctx,k).height){this.ctx.clearRect(0,0,e,a)}}k=new WeakMap;class Ke{constructor(e,a,i="default"){m(this,"ground",document.body.offsetHeight);m(this,"gravityX",T(1,5));m(this,"gravityY",T(1,5));m(this,"speed",T(2,5)/10);m(this,"bounceNum",0);m(this,"maxBounceNum",5);m(this,"revert",!1);this.x1=e||0,this.y1=a||0,this.size=T(1,3),this.isStopped=!1,this.direction=Math.random()<.6?1:-1,this.type=i}update(e){this.type==="shrapnel"?this._updateShrapnel():this._updateSeed(e)}_updateSeed(e){if(this._isBarrier(e)&&(this.revert=!0,this.bounceNum+=1),this.gravityY<0&&(this.revert=!1),this._isBounceLimitReached()||this._isUnderGround()){this.isStopped=!0;return}this._move()}_updateShrapnel(){if(this._isUnderGround()){this.isStopped=!0;return}this._fallDown(this.direction,!0)}_isBounceLimitReached(){return this.maxBounceNum<this.bounceNum}_isUnderGround(){return this.ground<this.y1}_isBarrier(e){return e?this.y1>=e.y1&&e.x1<this.x1&&this.x1<e.x2:!1}_move(){this.revert?this._fallUp():this._fallDown()}_fallDown(e,a){this._moveX(e,a),this.y1+=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY+this.speed)*100)/100}_fallUp(e){this._moveX(e),this.y1-=Math.round(this.gravityY),this.gravityY=Math.round((this.gravityY-1)*100)/100}_moveX(e=1,a=!1){const i=a?T(2,8):7;this.x1+=e*Math.round(this.gravityX/i),this.gravityX=Math.round((this.gravityX+this.speed)*100)/100}}class We{constructor(e,a){m(this,"gravityY",10);m(this,"ground",-20);this.x1=e,this.x2=e+6,this.y1=a,this.size=6,this.isStopped=!1}update(){if(this._isOverScreen()){this.isStopped=!0;return}this._move()}_move(){this._moveY()}_moveY(){this.y1-=Math.round(this.gravityY)}_isOverScreen(){return this.y1<this.ground}}class ce{constructor(e,a){m(this,"isShow",!1);m(this,"x1",0);m(this,"x2",0);m(this,"y1",0);m(this,"y2",0);const i=e===" "||e==="|";this.id=a,this.sign=e===" "?"-":e,this.isKilled=i,this.isService=i}static getLifeLetters(e){return e.filter(a=>!a.isKilled)}}const je={class:"canvas-letters"},qe={id:"lettersEl",class:"letters"},Je=["width","height"],Qe={__name:"CanvasLetters",props:{isDebug:{type:Boolean,default:!1},shooter:{type:Object,default:()=>{}}},emits:["canvas-letters-damage"],setup(t,{emit:e}){const a=t,i=J();let r,n,l;const d=u([]),v=u([]),L=u(3),b=u(16),y=u(!1),w=u(null),C=u(0),M=u(0),N=f(()=>i.getters["game/shots"]),B=f(()=>i.getters["game/letters"]),R=f(()=>i.getters["game/barrier"]),D=f(()=>i.getters["game/circles"]),O=f(()=>a.isDebug?"Hello":"Hello, my name is Roman.|I am a Front-End developer with 12 years old experience.|SPA, SSR, SSG, js and Vue ... are my passion.|Check this out some projects on my Work page.|Feel free if you wanna say hello at kuzroman@list.ru then do it!)"),P=s=>i.commit("game/setIsSeedsFall",s),$=s=>i.commit("game/setIsGameFinished",s),F=s=>i.commit("game/setLetters",s),I=s=>i.commit("game/updateLetters",s),E=s=>i.commit("game/addCircle",s),V=s=>i.commit("game/removeCircle",s),X=s=>i.commit("game/showLetter",s),K=s=>i.commit("game/killLetter",s);z(()=>N.value,()=>{const s=new We(a.shooter.x1,a.shooter.y1);v.value.push(s),ie()});const ve=()=>{const s=Array.from(O.value,(c,_)=>new ce(c,_));F(s)},ge=()=>{let s=0,c;n=setInterval(()=>{s<=B.value.length-1?(c=B.value[s],X(c),I(c)):clearInterval(n),s++},b.value)},fe=s=>{const c=B.value[s.id];I({...c,...s}),ae(s)},ae=(s,c)=>{for(let _=0;_<L.value;_++){const W=new Ke(s.x1,s.y1,c);d.value.push(W)}},ie=()=>{P(!0),clearInterval(l),l=setInterval(()=>{y.value||(w.value.clearCanvas(C.value,M.value),ye(),xe(),Se(),!d.value.length&&!v.value.length&&!Object.keys(D.value).length&&(clearInterval(l),P(!1)))},b.value)},ye=()=>{d.value=d.value.filter(s=>(s.update(R.value),s.type==="shrapnel"&&we(a.shooter,s),w.value.drawRect(s.x1,s.y1,s.size),!s.isStopped))},xe=()=>{v.value=v.value.filter(s=>{s.update();const c=ce.getLifeLetters(B.value);return c.length?Le(s,c):$(!0),w.value.drawRing(s.x1,s.y1,s.size,"#fc0"),!s.isStopped})},Se=()=>{for(const s in D.value){const c=D.value[s];w.value.drawRing(c.x,c.y,c.size+=.5,!1,c.thick-=.2,"#fff"),c.thick<c.endThick&&V(s)}},Le=(s,c)=>{c.forEach(_=>{s.y1<_.y1&&(s.x1<_.x1&&_.x1<s.x2||s.x1<_.x2&&_.x2<s.x2||_.x1<s.x1&&s.x2<_.x2)&&(K(_),E(new Ue(_.x1,_.y1)),ae({x1:s.x1,y1:s.y1},"shrapnel"),r.replay())})},we=(s,c)=>{s.y1<c.y1&&s.x1<c.x1&&c.x1<s.x2&&(c.isStopped=!0,e("canvas-letters-damage"))},$e=s=>{y.value=s},be=()=>{w.value=new Xe("#canvas"),ve(),ge(),ie()};return Q(()=>{C.value=window.innerWidth,M.value=window.innerHeight,r=new A(Ve,.3),be()}),Z(()=>{clearInterval(n),r.destroy()}),(s,c)=>{const _=Ye,W=Ee;return h(),p("div",je,[o("div",qe,[(h(!0),p(Ce,null,Me(g(B),H=>(h(),j(_,{key:H.id,"is-show":H.isShow,"is-killed":H.isKilled,sign:H.sign,"onLetterTag-Show":fe},null,8,["is-show","is-killed","sign"]))),128))]),o("canvas",{id:"canvas",width:g(C),height:g(M)},null,8,Je),t.isDebug?(h(),j(W,{key:0,"is-debug":t.isDebug,seeds:g(d),bullets:g(v),letters:g(B),shooter:t.shooter,"onDebugInput-Pause":$e},null,8,["is-debug","seeds","bullets","letters","shooter"])):ue("",!0)])}}};const Ze={name:"UIButton",props:{text:{type:String,default:"Button"},disabled:{type:Boolean,default:!1}},data(){return{}},computed:{},methods:{}},et={class:"ui-button"};function tt(t,e,a,i,r,n){return h(),p("div",et,x(a.text),1)}const se=G(Ze,[["render",tt]]);const st={name:"ButtonPlay",components:{UIButton:se},props:{},data(){return{barrier:{},texts:{default:"Destroy this text",wait:"Wait for falling ...",again:"Close"}}},computed:{...ee("game",["isSeedsFall","isGameReady","isGameFinished"]),text(){return this.isGameFinished?this.texts.again:this.isSeedsFall?this.texts.wait:this.texts.default},disabled(){return this.isSeedsFall},stiles(){return{disabled:this.disabled,hide:this.isGameReady&&!this.isGameFinished}}},methods:{...te("game",["setIsGameReady","setBarrier"]),handleClick(){if(!this.isSeedsFall){if(this.isGameFinished){this.$emit("button-play--restart",this.barrier);return}setTimeout(()=>{this.setIsGameReady(!0)})}},createBarrier(){const t=this.$el.getBoundingClientRect();this.barrier={x1:t.left,x2:t.left+t.width,y1:t.top}}},mounted(){this.createBarrier(),this.setBarrier(this.barrier)}},at=["disabled"];function it(t,e,a,i,r,n){const l=se;return h(),p("div",{class:U(["button-play",n.stiles]),disabled:n.disabled,onClick:e[0]||(e[0]=(...d)=>n.handleClick&&n.handleClick(...d))},[S(l,{text:n.text},null,8,["text"])],10,at)}const nt=G(st,[["render",it]]);const ot={name:"UILoaderLine",props:{percent:{type:Number,default:50}},data(){return{}},computed:{width(){return`${this.percent}%`}}},rt={class:"ui-loader-line"};function ct(t,e,a,i,r,n){return h(),p("div",rt,[o("div",{class:"loader",style:he({width:n.width})},null,4)])}const pe=G(ot,[["render",ct]]);const lt={name:"IconTime"},dt={class:"icon-time",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},ut=o("path",{d:"M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448 c0,10.19-8.259,18.447-18.447,18.447c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699 c8.336,0,15.094-6.758,15.094-15.094S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z M7.533,21.646C9.111,13.06,16.633,6.552,25.678,6.552c10.188,0,18.447,8.259,18.447,18.448c0,10.19-8.259,18.447-18.447,18.447 c-7.167,0-13.378-4.084-16.433-10.053h3.886c2.708,4.039,7.317,6.699,12.547,6.699c8.336,0,15.094-6.758,15.094-15.094 S34.014,9.907,25.678,9.907c-7.184,0-13.195,5.018-14.72,11.739H7.533L7.533,21.646z M24.838,25.587l8.74,5.151l0.851-1.444 l-7.913-4.706V13.314h-1.678V25.587z M8.906,28.354l5.031-6.708H3.875L8.906,28.354z",fill:"#6a6a6a"},null,-1),ht=[ut];function _t(t,e,a,i,r,n){return h(),p("svg",dt,ht)}const mt=G(lt,[["render",_t]]);const pt={name:"IconShield"},vt=t=>(Re("data-v-4739967d"),t=t(),De(),t),gt={class:"icon-shield",version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 50 50",space:"preserve"},ft=vt(()=>o("path",{d:"M41.575,12.596c-3.887-1.112-6.776-2.975-9.326-4.616C29.669,6.317,27.442,4.882,25,4.882 c-2.441,0-4.668,1.435-7.248,3.094c-2.549,1.645-5.438,3.507-9.325,4.619l-1.324,0.378v1.376c0,0.691,0.033,5.652,0.086,6.479 c0.109,1.667,0.339,3.317,0.684,4.905c3.292,15.173,15.951,20.082,16.488,20.282L25,46.256l0.642-0.24 c0.536-0.2,13.193-5.105,16.486-20.282c0.345-1.588,0.575-3.237,0.684-4.905c0.055-0.825,0.086-5.787,0.086-6.479v-1.376 L41.575,12.596z M25,44.308V25.345H9.658C9.343,23.9,9.119,22.358,9.012,20.71c-0.049-0.75-0.084-5.567-0.084-6.36 C16.964,12.051,21.067,6.709,25,6.709V20.71v4.635h15.346C37.226,39.73,25,44.308,25,44.308z",fill:"#6a6a6a"},null,-1)),yt=[ft];function xt(t,e,a,i,r,n){return h(),p("svg",gt,yt)}const St=G(pt,[["render",xt],["__scopeId","data-v-4739967d"]]);const le=100;let de;const Lt={name:"StatusBar",components:{UI_Loader_line:pe,UILink2Move:_e,IconTime:mt,IconShield:St},data(){return{health:le,isDebug:!1}},watch:{isGameStart(){this.runTimer()},damage(t){this.health=le-t},health(t){t<=0&&this.setIsGameFinished(!0)}},computed:{...ee("game",["isGameReady","isGameStart","isGameFinished","score","shots","letters","killedLetters","damage","timeLeft"])},methods:{...te("game",["setIsGameFinished","setIsLeaderBoardOpened","setScore","decreaseTimeLeft"]),runTimer(){de=setInterval(()=>{this.decreaseTimeLeft(),(this.timeLeft<=0||this.isGameFinished)&&(this.setIsGameFinished(!0),clearInterval(de))},1e3)},openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},wt={class:"status-bar--top"},$t={class:"score"},bt={class:"status-bar--right"},Bt={class:"time"};function Gt(t,e,a,i,r,n){const l=q("IconTime"),d=q("IconShield"),v=pe,L=_e;return h(),p("div",{class:U(["status-bar",{active:t.isGameReady||r.isDebug}])},[o("div",wt,[o("div",$t,x(t.killedLetters.length)+" killed",1),o("div",bt,[S(l),S(d),o("div",Bt,x(t.timeLeft)+"s",1)])]),S(v,{class:"loader-Line",percent:r.health},null,8,["percent"]),S(L,{class:"leaders",text:"leaderboard",onClick:n.openLeaderBoard},null,8,["onClick"])],2)}const It=G(Lt,[["render",Gt]]),kt=""+new URL("damage.f1e615a0.mp3",import.meta.url).href;const Ct={__name:"RobotShooter",props:{position:{type:Object,default:{}}},setup(t,{expose:e}){const a=t,i=J();let r;const n=u(!1),l=u(null),d=f(()=>i.getters["game/isGameReady"]),v=f(()=>i.getters["game/isGameFinished"]),L=f(()=>i.getters["game/damage"]),b=f(()=>({left:a.position.x1+"px"})),y=f(()=>({active:d.value&&!v.value,damage:n.value})),w=()=>{n.value=!0,setTimeout(()=>{n.value=!1},300)};return z(()=>L.value,()=>{w(),r.replay()}),Q(()=>{r=new A(kt,.3)}),Z(()=>{r.destroy()}),e({shooter:l}),(C,M)=>(h(),p("div",{ref_key:"shooter",ref:l,class:U(["robot-shooter",g(y)]),style:he(g(b))},null,6))}};const Mt={},Rt={class:"ui-dashed-list"};function Dt(t,e){return h(),p("div",Rt,[Fe(t.$slots,"default")])}const Ft=G(Mt,[["render",Dt]]);const Tt={name:"ScoreBoard",components:{UIButton:se,DashedList:Ft},data(){return{isDebug:!1}},watch:{score(t){this.setScore(t)}},computed:{...ee("game",["isGameFinished","timeLeft","damage","shots","letters","killedLetters","aliveLetters","score"]),score(){if(this.aliveLetters.length,!this.killedLetters.length)return 0;const t=Math.ceil(this.killedLetters.length*1e4/(this.aliveLetters.length+this.shots)),e=this.timeLeft*10-this.damage*5;return t+e}},methods:{...te("game",["setScore","setIsLeaderBoardOpened"]),openLeaderBoard(){this.setIsLeaderBoardOpened(!0)}}},zt=o("div",{class:"hooray"},"Hooray!",-1),Ut={class:"result"},Pt=o("div",null,"Time left",-1),Ht={class:"result"},Yt=o("div",null,"Shots",-1),At={class:"result"},Nt=o("div",null,"Goals",-1),Ot={class:"result"},Et=o("div",null,"Life",-1),Vt={class:"result best"},Xt=o("div",null,"Your best score",-1);function Kt(t,e,a,i,r,n){const l=q("DashedList");return h(),p("div",{class:U(["score-board",{active:t.isGameFinished||r.isDebug}])},[o("h3",null,x(n.score)+" points",1),zt,S(l,null,{default:me(()=>[o("div",Ut,[Pt,o("div",null,x(t.timeLeft),1)]),o("div",Ht,[Yt,o("div",null,x(t.shots),1)]),o("div",At,[Nt,o("div",null,x(t.killedLetters.length),1)]),o("div",Ot,[Et,o("div",null,x(100-t.damage),1)]),o("div",Vt,[Xt,o("div",null,x(n.score),1)])]),_:1})],2)}const Wt=G(Tt,[["render",Kt]]),jt=""+new URL("shoot.6b00b3bd.mp3",import.meta.url).href,qt=""+new URL("backgroundGame.c17ea688.mp3",import.meta.url).href;const Jt={__name:"MainGame",setup(t){const e=J();let a,i;const r=u(!1),n=u({}),l=u(0),d=u(null),v=f(()=>e.getters["game/isGameFinished"]),L=f(()=>e.getters["game/isGameReady"]),b=f(()=>e.getters["app/isPageAnimationFinished"]),y=$=>e.commit("game/setIsGameStart",$),w=()=>e.commit("game/resetStateGame"),C=()=>e.commit("game/increaseShoots"),M=()=>e.commit("game/increaseDamage"),N=()=>e.commit("leaderBoard/resetStateLeaderBoard"),B=()=>{l.value+=1},R=()=>{N(),w(),B(),i.destroy(),a.destroy()},D=()=>{!L.value||v.value||(y(!0),C(),a.replay())},O=$=>{var I;if(!((I=d==null?void 0:d.value)!=null&&I.shooter))return;const F=d.value.shooter;n.value={x1:$.clientX,y1:F.getBoundingClientRect().top,x2:$.clientX+F.offsetWidth}},P=()=>{let $;window.addEventListener("resize",()=>{clearTimeout($),$=setTimeout(()=>{R()},300)})};return Q(()=>{a=new A(jt,.3),i=new A(qt,.5,!0),P()}),Z(()=>{R()}),z(()=>L.value,()=>{i.replay()}),z(()=>v.value,()=>{i.pause()}),($,F)=>{const I=Qe,E=nt,V=It,X=Ct,K=Wt;return h(),p("div",{key:g(l),class:"main-game",onClick:D,onMousemove:O},[S(I,{"is-debug":g(r),shooter:g(n),onCanvasLettersDamage:M},null,8,["is-debug","shooter"]),S(Te,null,{default:me(()=>[g(b)?(h(),j(E,{key:0,"onButtonPlay-Restart":R})):ue("",!0)]),_:1}),S(V),S(X,{ref_key:"shooter",ref:d,position:g(n)},null,8,["position"]),S(K)],32)}}},Qt={class:"page-game"},Zt=o("div",{class:"stars-box"},[o("div",{id:"stars"}),o("div",{id:"stars2"}),o("div",{id:"stars3"})],-1),is=ze({__name:"index",setup(t){return Pe({title:"Hi! Nice to meet you =)"}),(e,a)=>{const i=Jt;return h(),p("div",Qt,[S(i),Zt])}}});export{is as default};
